<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/server_configuration.md at 2023-10-26 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jargyle &#x2013; Server Configuration</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">
Jargyle
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2023-10-26</span>
          &nbsp;| <span id="projectVersion">Version: 5.0.0-SNAPSHOT</span>
      </div>
      <div class="xright">      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Overview</h5>
    <ul>
     <li class="none"><a href="index.html" title="Introduction">Introduction</a></li>
     <li class="none"><a href="licenses.html" title="License">License</a></li>
    </ul>
       <h5>About Jargyle</h5>
    <ul>
     <li class="none"><a href="requirements.html" title="Requirements">Requirements</a></li>
     <li class="none"><a href="releases.html" title="Releases">Releases</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="none"><a href="cli.html" title="Command Line Interface">Command Line Interface</a></li>
     <li class="none"><strong>Server Configuration</strong></li>
     <li class="none"><a href="reference.html" title="Reference">Reference</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<h1>Server Configuration</h1>
<div class="section">
<h2><a name="Page_Contents"></a>Page Contents</h2>
<ul>

<li><a href="server_configuration.html#Enabling_SSL.2FTLS_for_TCP_Traffic_Between_the_Server_and_Its_Clients">Enabling SSL/TLS for TCP Traffic Between the Server and Its Clients</a></li>
<li><a href="server_configuration.html#Enabling_DTLS_for_UDP_Traffic_Between_the_Server_and_Its_Clients">Enabling DTLS for UDP Traffic Between the Server and Its Clients</a></li>
<li><a href="server_configuration.html#Using_SOCKS5_Authentication">Using SOCKS5 Authentication</a>
<ul>

<li><a href="server_configuration.html#Using_No_Authentication">Using No Authentication</a></li>
<li><a href="server_configuration.html#Using_Username_Password_Authentication">Using Username Password Authentication</a></li>
<li><a href="server_configuration.html#Using_GSS-API_Authentication">Using GSS-API Authentication</a></li>
</ul>
</li>
<li><a href="server_configuration.html#Chaining_to_Another_SOCKS_Server">Chaining to Another SOCKS Server</a>
<ul>

<li><a href="server_configuration.html#Enabling_SSL.2FTLS_for_TCP_Traffic_Between_the_Server_and_the_Other_SOCKS_Server">Enabling SSL/TLS for TCP Traffic Between the Server and the Other SOCKS Server</a></li>
<li><a href="server_configuration.html#Enabling_DTLS_for_UDP_Traffic_Between_the_Server_and_the_Other_SOCKS_Server">Enabling DTLS for UDP Traffic Between the Server and the Other SOCKS Server</a></li>
<li><a href="server_configuration.html#Chaining_to_the_Other_SOCKS_Server_Using_SOCKS5_Authentication">Chaining to the Other SOCKS Server Using SOCKS5 Authentication</a>
<ul>

<li><a href="server_configuration.html#Chaining_to_the_Other_SOCKS_Server_Using_No_Authentication">Chaining to the Other SOCKS Server Using No Authentication</a></li>
<li><a href="server_configuration.html#Chaining_to_the_Other_SOCKS_Server_Using_Username_Password_Authentication">Chaining to the Other SOCKS Server Using Username Password Authentication</a></li>
<li><a href="server_configuration.html#Chaining_to_the_Other_SOCKS_Server_Using_GSS-API_Authentication">Chaining to the Other SOCKS Server Using GSS-API Authentication</a></li>
</ul>
</li>
<li><a href="server_configuration.html#Resolving_Host_Names_From_the_Other_SOCKS5_Server">Resolving Host Names From the Other SOCKS5 Server</a></li>
</ul>
</li>
<li><a href="server_configuration.html#Chaining_to_a_Specified_Chain_of_Other_SOCKS_Servers">Chaining to a Specified Chain of Other SOCKS Servers</a></li>
<li><a href="server_configuration.html#Chaining_to_Multiple_Specified_Chains_of_Other_SOCKS_Servers">Chaining to Multiple Specified Chains of Other SOCKS Servers</a></li>
<li><a href="server_configuration.html#Using_Rules_to_Manage_Traffic">Using Rules to Manage Traffic</a>
<ul>

<li><a href="server_configuration.html#Rule_Conditions">Rule Conditions</a></li>
<li><a href="server_configuration.html#Rule_Results">Rule Results</a></li>
<li><a href="server_configuration.html#Allowing_or_Denying_Traffic">Allowing or Denying Traffic</a></li>
<li><a href="server_configuration.html#Allowing_a_Limited_Number_of_Simultaneous_Instances_of_Traffic">Allowing a Limited Number of Simultaneous Instances of Traffic</a></li>
<li><a href="server_configuration.html#Routing_Traffic">Routing Traffic</a></li>
<li><a href="server_configuration.html#Redirecting_the_Desired_Destination">Redirecting the Desired Destination</a></li>
<li><a href="server_configuration.html#Configuring_Sockets">Configuring Sockets</a></li>
<li><a href="server_configuration.html#Configuring_Relay_Settings">Configuring Relay Settings</a></li>
<li><a href="server_configuration.html#Limiting_Relay_Bandwidth">Limiting Relay Bandwidth</a></li>
</ul>
</li>
</ul></div>
<div class="section">
<h2><a name="Enabling_SSL.2FTLS_for_TCP_Traffic_Between_the_Server_and_Its_Clients"></a>Enabling SSL/TLS for TCP Traffic Between the Server and Its Clients</h2>
<p>You can enable SSL/TLS for TCP traffic between the server and its clients. By default SSL/TLS for TCP traffic between the server and its clients is disabled. To enable SSL/TLS for TCP traffic between the server and its clients, you will need to have the setting <tt>ssl.enabled</tt> set to <tt>true</tt>. In addition, you will need to have the setting <tt>ssl.keyStoreFile</tt> to specify the server&#x2019;s key store file (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>ssl.keyStorePassword</tt> to specify the password for the server&#x2019;s key store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --setting=ssl.keyStorePassword=password
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-ssl-key-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --enter-ssl-key-store-pass
</pre></div></div>

<p>If you want to have the client authenticate using SSL/TLS, you will need to have the setting <tt>ssl.needClientAuth</tt> set to <tt>true</tt>. In addition, you will need to have the setting <tt>ssl.trustStoreFile</tt> to specify the client&#x2019;s key store file to be used as a trust store (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>ssl.trustStorePassword</tt> to specify the password for the client&#x2019;s trust store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --setting=ssl.keyStorePassword=password \
    --setting=ssl.needClientAuth=true \
    --setting=ssl.trustStoreFile=client.jks \
    --setting=ssl.trustStorePassword=drowssap
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.needClientAuth&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.trustStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.trustStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-ssl-trust-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --enter-ssl-key-store-pass \
    --setting=ssl.needClientAuth=true \
    --setting=ssl.trustStoreFile=client.jks \
    --enter-ssl-trust-store-pass
</pre></div></div>
</div>
<div class="section">
<h2><a name="Enabling_DTLS_for_UDP_Traffic_Between_the_Server_and_Its_Clients"></a>Enabling DTLS for UDP Traffic Between the Server and Its Clients</h2>
<p>You can enable DTLS for UDP traffic between the server and its clients. By default DTLS for UDP traffic between the server and its clients is disabled. To enable DTLS for UDP traffic between the server and its clients, you will need to have the setting <tt>dtls.enabled</tt> set to <tt>true</tt>. In addition, you will need to have the setting <tt>dtls.keyStoreFile</tt> to specify the server&#x2019;s key store file (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>dtls.keyStorePassword</tt> to specify the password for the server&#x2019;s key store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --setting=dtls.keyStorePassword=password
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-dtls-key-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --enter-dtls-key-store-pass
</pre></div></div>

<p>If you want to have the client authenticate using DTLS, you will need to have the setting <tt>dtls.needClientAuth</tt> set to <tt>true</tt>. In addition, you will need to have the setting <tt>dtls.trustStoreFile</tt> to specify the client&#x2019;s key store file to be used as a trust store (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>dtls.trustStorePassword</tt> to specify the password for the client&#x2019;s trust store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --setting=dtls.keyStorePassword=password \
    --setting=dtls.needClientAuth=true \
    --setting=dtls.trustStoreFile=client.jks \
    --setting=dtls.trustStorePassword=drowssap
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.needClientAuth&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.trustStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.trustStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-dtls-trust-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --enter-dtls-key-store-pass \
    --setting=dtls.needClientAuth=true \
    --setting=dtls.trustStoreFile=client.jks \
    --enter-dtls-trust-store-pass
</pre></div></div>
</div>
<div class="section">
<h2><a name="Using_SOCKS5_Authentication"></a>Using SOCKS5 Authentication</h2>
<p>The server has the following SOCKS5 authentication methods to choose from:</p>
<ul>

<li><tt>NO_AUTHENTICATION_REQUIRED</tt>: No authentication required</li>
<li><tt>GSSAPI</tt>: GSS-API authentication</li>
<li><tt>USERNAME_PASSWORD</tt>: Username password authentication</li>
</ul>
<p>On the command line, you can have one or more of the aforementioned authentication methods set in the setting <tt>socks5.methods</tt> as a space separated list.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server &quot;--setting=socks5.methods=NO_AUTHENTICATION_REQUIRED GSSAPI&quot;
</pre></div></div>

<p>In the server configuration file, you can have one or more of the aforementioned authentication methods set in the setting <tt>socks5.methods</tt> as a <tt>&lt;socks5.methods/&gt;</tt> XML element with one or more <tt>&lt;socks5.method/&gt;</tt> XML elements each specifying an authentication method.</p>
<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If not set, the default value for the setting <tt>socks5.methods</tt> is set to <tt>NO_AUTHENTICATION_REQUIRED</tt></p>
<div class="section">
<h3><a name="Using_No_Authentication"></a>Using No Authentication</h3>
<p>Because the default value for the setting <tt>socks5.methods</tt> is set to <tt>NO_AUTHENTICATION_REQUIRED</tt>, it is not required for <tt>NO_AUTHENTICATION_REQUIRED</tt> to be included in the setting <tt>socks5.methods</tt>.</p>
<p>However, if other authentication methods are to be used in addition to <tt>NO_AUTHENTICATION_REQUIRED</tt>, <tt>NO_AUTHENTICATION_REQUIRED</tt> must be included in the setting <tt>socks5.methods</tt></p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server &quot;--setting=socks5.methods=NO_AUTHENTICATION_REQUIRED GSSAPI USERNAME_PASSWORD&quot;
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;NO_AUTHENTICATION_REQUIRED&lt;/socks5.method&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Using_Username_Password_Authentication"></a>Using Username Password Authentication</h3>
<p>To use username password authentication, you will need to have the setting <tt>socks5.methods</tt> to have <tt>USERNAME_PASSWORD</tt> included.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server --setting=socks5.methods=USERNAME_PASSWORD
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>Also, you will need to have the setting <tt>socks5.userpassauth.userRepository</tt> to specify the name of the class that extends <tt>com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.UserRepository</tt> along with an initialization string value.</p>
<p>The following are two provided classes you can use:</p>
<ul>

<li><tt>com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.StringSourceUserRepository</tt></li>
<li><tt>com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.CsvFileSourceUserRepository</tt></li>
</ul>
<p><tt>com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.StringSourceUserRepository</tt>: This class handles the storage of the SOCKS5 users from the initialization string value of a space separated list of username password values.</p>
<p>Each username password value in the space separated list must be of the following format:</p>

<div>
<div>
<pre class="source">USERNAME:PASSWORD
</pre></div></div>

<p>Where <tt>USERNAME</tt> is the username and <tt>PASSWORD</tt> is the password. Both the username and password can be URL encoded.</p>
<p>If the username or the password contains a colon character (<tt>:</tt>), then each colon character must be replaced with the URL encoding character <tt>%3A</tt>.</p>
<p>If the username or the password contains a space character, then each space character must be replaced with the URL encoding character <tt>+</tt> or <tt>%20</tt>.</p>
<p>If the username or the password contains a plus sign character (<tt>+</tt>) not used for URL encoding, then each plus sign character not used for URL encoding must be replaced with the URL encoding character <tt>%2B</tt>.</p>
<p>If the username or the password contains a percent sign character (<tt>%</tt>) not used for URL encoding, then each percent sign character not used for URL encoding must be replaced with the URL encoding character <tt>%25</tt>.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=socks5.methods=USERNAME_PASSWORD \
    &quot;--setting=socks5.userpassauth.userRepository=com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.StringSourceUserRepository:Aladdin:opensesame Jasmine:mission%3Aimpossible&quot;
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.userpassauth.userRepository&lt;/name&gt;
            &lt;socks5.userpassauth.userRepository&gt;
                &lt;className&gt;com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.StringSourceUserRepository&lt;/className&gt;
                &lt;initializationString&gt;Aladdin:opensesame Jasmine:mission%3Aimpossible&lt;/initializationString&gt;
            &lt;/socks5.userpassauth.userRepository&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p><tt>com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.CsvFileSourceUserRepository</tt>: This class handles the storage of the SOCKS5 users from a CSV file whose name is provided as an initialization string value. The SOCKS5 users from the CSV file are loaded onto memory. Because of this, you will need at least as much memory as the size of the CSV file. If the CSV file does not exist, it will be created and used. If the CSV file does exist, the existing CSV file will be used. To manage SOCKS5 users under a user repository, see <a href="cli.html#Managing_SOCKS5_Users">Managing SOCKS5 Users</a>.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=socks5.methods=USERNAME_PASSWORD \
    --setting=socks5.userpassauth.userRepository=com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.CsvFileSourceUserRepository:users.csv
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.userpassauth.userRepository&lt;/name&gt;
            &lt;socks5.userpassauth.userRepository&gt;
                &lt;className&gt;com.github.jh3nd3rs0n.jargyle.server.socks5.userpassauth.userrepo.impl.CsvFileSourceUserRepository&lt;/className&gt;
                &lt;initializationString&gt;users.csv&lt;/initializationString&gt;
            &lt;/socks5.userpassauth.userRepository&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Using_GSS-API_Authentication"></a>Using GSS-API Authentication</h3>
<p>To use GSS-API authentication, you will need to have the setting <tt>socks5.methods</tt> to have <tt>GSSAPI</tt> included.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server --setting=socks5.methods=GSSAPI
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>Also, you will need to specify Java system properties to use a security mechanism that implements the GSS-API (for example, Kerberos is a security mechanism that implements the GSS-API).</p>
<p>The following are sufficient examples of using the Kerberos security mechanism:</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
./bin/jargyle start-server --setting=socks5.methods=GSSAPI 
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;!--
Before running this file, the following must be executed:
export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
--&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>The Java system property <tt>javax.security.auth.useSubjectCredsOnly</tt> with the value <tt>false</tt> disables JAAS-based authentication to obtain the credentials directly and lets the underlying security mechanism obtain them instead.</p>
<p>The Java system property <tt>java.security.auth.login.config</tt> with the value <tt>login.conf</tt> provides a JAAS configuration file for the underlying security mechanism.</p>
<p><tt>login.conf</tt>:</p>

<div>
<div>
<pre class="source">com.sun.security.jgss.accept {
  com.sun.security.auth.module.Krb5LoginModule required
  principal=&quot;rcmd/127.0.0.1&quot;
  useKeyTab=true
  keyTab=&quot;rcmd.keytab&quot;
  storeKey=true;
};
</pre></div></div>

<p>In <tt>login.conf</tt>, <tt>rcmd/127.0.0.1</tt> is a service principal that is created by a Kerberos administrator specifically for a SOCKS5 server with the service name <tt>rcmd</tt> residing at the address <tt>127.0.0.1</tt>. (In a production environment, the address <tt>127.0.0.1</tt> should be replaced by the name of the machine of where the SOCKS5 server resides.)</p>
<p>Also in <tt>login.conf</tt>, <tt>rcmd.keytab</tt> is a keytab file also created by a Kerberos administrator that contains the aforementioned service principal and its respective encrypted key.</p>
<p>The Java system property <tt>java.security.krb5.conf</tt> with the value <tt>krb5.conf</tt> provides the Kerberos configuration file that points to the Kerberos Key Distribution Center (KDC) for authentication.</p>
<p><tt>krb5.conf</tt>:</p>

<div>
<div>
<pre class="source">[libdefaults]
    kdc_realm = EXAMPLE.COM
    default_realm = EXAMPLE.COM
    udp_preference_limit = 4096
    kdc_tcp_port = 12345
    kdc_udp_port = 12345

[realms]
    EXAMPLE.COM = {
        kdc = 127.0.0.1:12345
    }
</pre></div></div>

<p>In <tt>krb5.conf</tt>, a KDC is defined as running at the address <tt>127.0.0.1</tt> on port <tt>12345</tt> with its realm as <tt>EXAMPLE.COM</tt>. (In a production environment, the address <tt>127.0.0.1</tt> should be replaced by the actual address or name of the machine of where the KDC resides. Also, in a production environment, the realm <tt>EXAMPLE.COM</tt> should be replaced by an actual realm provided by a Kerberos administrator.)</p></div></div>
<div class="section">
<h2><a name="Chaining_to_Another_SOCKS_Server"></a>Chaining to Another SOCKS Server</h2>
<p>You can have the server chained to another SOCKS server, meaning that its traffic can be routed through another SOCKS server. To have the server chained to another SOCKS server, you will need to specify the other SOCKS server as a URI in the setting <tt>chaining.socksServerUri</tt></p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server --setting=chaining.socksServerUri=socks5://127.0.0.1:23456
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>Please note that the scheme in the URI specifies the SOCKS protocol to be used when accessing the other SOCKS server (<tt>socks5</tt>), the address or name of the machine of where the other SOCKS server resides (<tt>127.0.0.1</tt>), and the port number of the other SOCKS server (<tt>23456</tt>). In the aforementioned examples, the SOCKS protocol version 5 is used. At this time, the only supported scheme for the URI format is <tt>socks5</tt></p>
<div class="section">
<h3><a name="Enabling_SSL.2FTLS_for_TCP_Traffic_Between_the_Server_and_the_Other_SOCKS_Server"></a>Enabling SSL/TLS for TCP Traffic Between the Server and the Other SOCKS Server</h3>
<p>You can enable SSL/TLS for TCP traffic between the server and the other SOCKS server under the following condition:</p>
<ul>

<li>The other SOCKS server accepts SSL/TLS connections.</li>
</ul>
<p>By default SSL/TLS for TCP traffic between the server and the other SOCKS server is disabled. To enable SSL/TLS for TCP traffic between the server and the other SOCKS server, you will need to have the setting <tt>chaining.ssl.enabled</tt> set to <tt>true</tt>. In addition, you will need to have the setting <tt>chaining.ssl.trustStoreFile</tt> to specify the other SOCKS server&#x2019;s key store file used as a trust store (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>chaining.ssl.trustStorePassword</tt> to specify the password for the other SOCKS server&#x2019;s trust store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --setting=chaining.ssl.trustStorePassword=password
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-chaining-ssl-trust-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --enter-chaining-ssl-trust-store-pass
</pre></div></div>

<p>If the other SOCKS server wants the client (the server) to authenticate using SSL/TLS, you will need to have the setting <tt>chaining.ssl.keyStoreFile</tt> to specify the client&#x2019;s key store file (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>chaining.ssl.keyStorePassword</tt> to specify the password for the client&#x2019;s key store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.keyStoreFile=client.jks \
    --setting=chaining.ssl.keyStorePassword=drowssap \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --setting=chaining.ssl.trustStorePassword=password    
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.keyStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.keyStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-chaining-ssl-key-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.keyStoreFile=client.jks \
    --enter-chaining-ssl-key-store-pass \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --enter-chaining-ssl-trust-store-pass
</pre></div></div>
</div>
<div class="section">
<h3><a name="Enabling_DTLS_for_UDP_Traffic_Between_the_Server_and_the_Other_SOCKS_Server"></a>Enabling DTLS for UDP Traffic Between the Server and the Other SOCKS Server</h3>
<p>You can enable DTLS for UDP traffic between the server and the other SOCKS server under the following condition:</p>
<ul>

<li>The other SOCKS server accepts DTLS connections.</li>
</ul>
<p>By default DTLS for UDP traffic between the server and the other SOCKS server is disabled. To enable DTLS for UDP traffic between the server and the other SOCKS server, you will need to have the setting <tt>chaining.dtls.enabled</tt> set to <tt>true</tt>. In addition, you will need to have the setting <tt>chaining.dtls.trustStoreFile</tt> to specify the other SOCKS server&#x2019;s key store file used as a trust store (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>chaining.dtls.trustStorePassword</tt> to specify the password for the other SOCKS server&#x2019;s trust store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --setting=chaining.dtls.trustStorePassword=password
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-chaining-dtls-trust-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --enter-chaining-dtls-trust-store-pass
</pre></div></div>

<p>If the other SOCKS server wants the client (the server) to authenticate using DTLS, you will need to have the setting <tt>chaining.dtls.keyStoreFile</tt> to specify the client&#x2019;s key store file (this file would need to be created by Java&#x2019;s keytool utility). Also, you will need to have the setting <tt>chaining.dtls.keyStorePassword</tt> to specify the password for the client&#x2019;s key store file.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.keyStoreFile=client.jks \
    --setting=chaining.dtls.keyStorePassword=drowssap \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --setting=chaining.dtls.trustStorePassword=password    
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.keyStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.keyStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-chaining-dtls-key-store-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.keyStoreFile=client.jks \
    --enter-chaining-dtls-key-store-pass \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --enter-chaining-dtls-trust-store-pass
</pre></div></div>
</div>
<div class="section">
<h3><a name="Chaining_to_the_Other_SOCKS_Server_Using_SOCKS5_Authentication"></a>Chaining to the Other SOCKS Server Using SOCKS5 Authentication</h3>
<p>The server has the following SOCKS5 authentication methods to choose from when chaining to the other SOCKS5 server:</p>
<ul>

<li><tt>NO_AUTHENTICATION_REQUIRED</tt>: No authentication required</li>
<li><tt>GSSAPI</tt>: GSS-API authentication</li>
<li><tt>USERNAME_PASSWORD</tt>: Username password authentication</li>
</ul>
<p>On the command line, you can have one or more of the aforementioned authentication methods set in the setting <tt>chaining.socks5.methods</tt> as a space separated list.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    &quot;--setting=chaining.socks5.methods=NO_AUTHENTICATION_REQUIRED GSSAPI&quot;
</pre></div></div>

<p>In the configuration file, you can have one or more of the aforementioned authentication methods set in the setting <tt>chaining.socks5.methods</tt> as a <tt>&lt;socks5.methods/&gt;</tt> XML element with one or more <tt>&lt;socks5.method/&gt;</tt> XML elements each specifying an authentication method.</p>
<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If not set, the default value for the setting <tt>chaining.socks5.methods</tt> is set to <tt>NO_AUTHENTICATION_REQUIRED</tt></p>
<div class="section">
<h4><a name="Chaining_to_the_Other_SOCKS_Server_Using_No_Authentication"></a>Chaining to the Other SOCKS Server Using No Authentication</h4>
<p>Because the default value for the setting <tt>chaining.socks5.methods</tt> is set to <tt>NO_AUTHENTICATION_REQUIRED</tt>, it is not required for <tt>NO_AUTHENTICATION_REQUIRED</tt> to be included in the setting <tt>chaining.socks5.methods</tt>.</p>
<p>However, if other authentication methods are to be used in addition to <tt>NO_AUTHENTICATION_REQUIRED</tt>, <tt>NO_AUTHENTICATION_REQUIRED</tt> must be included in the setting <tt>chaining.socks5.methods</tt></p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    &quot;--setting=chaining.socks5.methods=NO_AUTHENTICATION_REQUIRED GSSAPI USERNAME_PASSWORD&quot;
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;NO_AUTHENTICATION_REQUIRED&lt;/socks5.method&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h4><a name="Chaining_to_the_Other_SOCKS_Server_Using_Username_Password_Authentication"></a>Chaining to the Other SOCKS Server Using Username Password Authentication</h4>
<p>To chain to the other SOCKS server using username password authentication, you will need to have the setting <tt>chaining.socks5.methods</tt> to have <tt>USERNAME_PASSWORD</tt> included.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>Also, you will need to have the settings <tt>chaining.socks5.userpassauth.username</tt> and <tt>chaining.socks5.userpassauth.password</tt> respectively specify the username and password for the other SOCKS5 server.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD \
    --setting=chaining.socks5.userpassauth.username=Aladdin \
    --setting=chaining.socks5.userpassauth.password=opensesame
    
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.username&lt;/name&gt;
            &lt;value&gt;Aladdin&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.password&lt;/name&gt;
            &lt;value&gt;opensesame&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>If you do not want to have the password appear in any script or in any part of the command line history for security reasons, you can use the command line option <tt>--enter-chaining-socks5-userpassauth-pass</tt> instead. It will provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD \
    --setting=chaining.socks5.userpassauth.username=Aladdin \
    --enter-chaining-socks5-userpassauth-pass
</pre></div></div>
</div>
<div class="section">
<h4><a name="Chaining_to_the_Other_SOCKS_Server_Using_GSS-API_Authentication"></a>Chaining to the Other SOCKS Server Using GSS-API Authentication</h4>
<p>To chain to the other SOCKS server using GSS-API authentication, you will need to have the setting <tt>chaining.socks5.methods</tt> to have <tt>GSSAPI</tt> included.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=GSSAPI
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>Also, you will need to specify Java system properties to use a security mechanism that implements the GSS-API (for example, Kerberos is a security mechanism that implements the GSS-API), and you will also need to specify the GSS-API service name for the other SOCKS5 server.</p>
<p>The following are sufficient examples of using the Kerberos security mechanism:</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=GSSAPI \
    --setting=chaining.socks5.gssapiauth.serviceName=rcmd/127.0.0.1 
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
&lt;!--
Before running this file, the following must be executed:
export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
--&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.gssapiauth.serviceName&lt;/name&gt;
            &lt;value&gt;rcmd/127.0.0.1&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>The Java system property <tt>javax.security.auth.useSubjectCredsOnly</tt> with the value <tt>false</tt> disables JAAS-based authentication to obtain the credentials directly and lets the underlying security mechanism obtain them instead.</p>
<p>The Java system property <tt>java.security.auth.login.config</tt> with the value <tt>login.conf</tt> provides a JAAS configuration file for the underlying security mechanism.</p>
<p><tt>login.conf</tt>:</p>

<div>
<div>
<pre class="source">com.sun.security.jgss.initiate {
  com.sun.security.auth.module.Krb5LoginModule required
  principal=&quot;alice&quot;
  useKeyTab=true
  keyTab=&quot;alice.keytab&quot;
  storeKey=true;
};
</pre></div></div>

<p>In <tt>login.conf</tt>, <tt>alice</tt> is a principal that is created by a Kerberos administrator.</p>
<p>Also in <tt>login.conf</tt>, <tt>alice.keytab</tt> is a keytab file also created by a Kerberos administrator that contains the aforementioned principal and its respective encrypted key.</p>
<p>The Java system property <tt>java.security.krb5.conf</tt> with the value <tt>krb5.conf</tt> provides the Kerberos configuration file that points to the Kerberos Key Distribution Center (KDC) for authentication.</p>
<p><tt>krb5.conf</tt>:</p>

<div>
<div>
<pre class="source">[libdefaults]
    kdc_realm = EXAMPLE.COM
    default_realm = EXAMPLE.COM
    udp_preference_limit = 4096
    kdc_tcp_port = 12345
    kdc_udp_port = 12345

[realms]
    EXAMPLE.COM = {
        kdc = 127.0.0.1:12345
    }
</pre></div></div>

<p>In <tt>krb5.conf</tt>, a KDC is defined as running at the address <tt>127.0.0.1</tt> on port <tt>12345</tt> with its realm as <tt>EXAMPLE.COM</tt>. (In a production environment, the address <tt>127.0.0.1</tt> should be replaced by the actual address or name of the machine of where the KDC resides. Also, in a production environment, the realm <tt>EXAMPLE.COM</tt> should be replaced by an actual realm provided by a Kerberos administrator.)</p>
<p>The setting <tt>chaining.socks5.gssapiauth.serviceName</tt> with the value <tt>rcmd/127.0.0.1</tt> is the GSS-API service name (or the Kerberos service principal) for the other SOCKS server residing at the address <tt>127.0.0.1</tt>. (In a production environment, the address <tt>127.0.0.1</tt> should be replaced by the name of the machine of where the other SOCKS server resides.)</p></div></div>
<div class="section">
<h3><a name="Resolving_Host_Names_From_the_Other_SOCKS5_Server"></a>Resolving Host Names From the Other SOCKS5 Server</h3>
<p>Before discussing host name resolution from the other SOCKS5 server, a brief explanation of the server&#x2019;s internals:</p>
<p>The server uses sockets to interact with the external world.</p>
<ul>

<li>Under the CONNECT command, it uses a socket that connects to the desired target server. In this documentation, this socket is called the server-facing socket.</li>
<li>Under the BIND command, it uses a socket that listens for an inbound socket. In this documentation, this socket is called the listen socket.</li>
<li>Under the UDP ASSOCIATE command, it uses a UDP socket that sends and receives datagram packets to and from peer UDP sockets. In this documentation, this UDP socket is called the peer-facing UDP socket.</li>
</ul>
<p>The server also uses a host resolver to resolve host names for the aforementioned sockets and for <a href="reference.html#The_SOCKS5_RESOLVE_Command">the RESOLVE command</a>.</p>
<p>When the server is chained to another SOCKS5 server, the aforementioned sockets that the server uses become SOCKS5-enabled, meaning that their traffic is routed through the other SOCKS5 server.</p>
<p>It is similar for the host resolver. When the server is chained to another SOCKS5 server, the host resolver that the server uses becomes SOCKS5-enabled, meaning that it can use the other SOCKS5 server to resolve host names provided that the other SOCKS5 server supports the SOCKS5 RESOLVE command. However, this functionality for the host resolver is disabled by default making the host resolver resolve host names through the local system.</p>
<p>Therefore, default host name resolution from the other SOCKS5 server is performed but has the following limitations:</p>
<p>Default host name resolution from the other SOCKS5 server OCCURS ONLY&#x2026;</p>
<ul>

<li>&#x2026;under the CONNECT command when the server-facing socket makes an extemporaneous outbound connection. Preparation is omitted for the server-facing socket. Such preparation includes applying the specified socket settings for the server-facing socket, resolving the target host name before connecting, and setting the specified timeout in milliseconds on waiting for the server-facing socket to connect. The host resolver is not used in resolving the target host name. When the server-facing socket is SOCKS5-enabled, the target host name is resolved by the other SOCKS5 server and not through the local system.</li>
</ul>
<p>Default host name resolution from the other SOCKS5 server DOES NOT OCCUR&#x2026;</p>
<ul>

<li>&#x2026;under the CONNECT command when the server-facing socket makes a prepared outbound connection. Preparation for the server-facing socket includes resolving the target host name before connecting. The host resolver is used in resolving the target host name. Because of its default functionality, the host resolver resolves the target host name through the local system.</li>
<li>&#x2026;under the BIND command when resolving the binding host name for the listen socket. The host resolver is used in resolving the binding host name for the listen socket. Because of its default functionality, the host resolver resolves the binding host name for the listen socket through the local system.</li>
<li>&#x2026;under the UDP ASSOCIATE command when resolving the host name for an outbound datagram packet. The host resolver is used in resolving the host name for an outbound datagram packet. Because of its default functionality, the host resolver resolves the host name for an outbound datagram packet through the local system.</li>
<li>&#x2026;under the RESOLVE command when resolving the provided host name. The host resolver is used in resolving the provided host name. Because of its default functionality, the host resolver resolves the provided host name through the local system.</li>
</ul>
<p>If you prefer to have host name resolution from the other SOCKS5 server without the aforementioned limitations, you would need to set the setting <tt>chaining.socks5.useResolveCommand</tt> to <tt>true</tt>. This setting enables the host resolver to use the SOCKS5 RESOLVE command on the other SOCKS5 server to resolve host names. This setting can only be used if the other SOCKS5 server supports the SOCKS5 RESOLVE command.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.useResolveCommand=true
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.useResolveCommand&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div></div>
<div class="section">
<h2><a name="Chaining_to_a_Specified_Chain_of_Other_SOCKS_Servers"></a>Chaining to a Specified Chain of Other SOCKS Servers</h2>
<p>You can have the server chained to a specified chain of other SOCKS servers, meaning that its traffic can be routed through the specified chain of the other SOCKS servers. To have the server chained to a specified chain of other SOCKS servers, you will need to have the setting <tt>chaining.socksServerUri</tt> specified multiple times with each setting specifying a SOCKS server as a URI.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:65432 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:34567
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:65432&lt;/value&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:34567&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>To specify the settings regarding a SOCKS server in the chain, the settings regarding a SOCKS server will need to be placed after that specified SOCKS server but before the next specified SOCKS server if any.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=GSSAPI \
    --setting=chaining.socks5.gssapiauth.serviceName=rcmd/127.0.0.1 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:65432 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD \
    --setting=chaining.socks5.userpassauth.username=Aladdin \
    --setting=chaining.socks5.userpassauth.password=opensesame \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:34567 \
    --setting=chaining.socks5.useResolveCommand=true
    
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.gssapiauth.serviceName&lt;/name&gt;
            &lt;value&gt;rcmd/127.0.0.1&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:65432&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.username&lt;/name&gt;
            &lt;value&gt;Aladdin&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.password&lt;/name&gt;
            &lt;value&gt;opensesame&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:34567&lt;/value&gt;
        &lt;/setting&gt;        
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.useResolveCommand&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>The known limitations of chaining to a specified chain of other SOCKS servers include the following:</p>
<ul>

<li>Only TCP traffic can be routed through the chain. The server will attempt to route any UDP traffic through the last SOCKS server of the chain.</li>
</ul></div>
<div class="section">
<h2><a name="Chaining_to_Multiple_Specified_Chains_of_Other_SOCKS_Servers"></a>Chaining to Multiple Specified Chains of Other SOCKS Servers</h2>
<p>You can have the server chained to multiple specified chains of other SOCKS servers, meaning that its traffic can be routed through one of the specified chains of other SOCKS servers. To have the server chained to multiple specified chains of other SOCKS servers, you will need to have a route ID assigned at the end of each <a href="server_configuration.html#Chaining_to_a_Specified_Chain_of_Other_SOCKS_Servers">chain</a> by using the setting <tt>chaining.routeId</tt></p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=chaining.routeId=delta
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;delta&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>From the aforementioned examples:</p>
<ul>

<li>The chain consisting of <tt>socks5://127.0.0.1:11111</tt>, <tt>socks5://127.0.0.1:11112</tt>, and <tt>socks5://127.0.0.1:11113</tt> is assigned the route ID of <tt>alpha</tt></li>
<li>The chain consisting of <tt>socks5://127.0.0.1:22221</tt>, <tt>socks5://127.0.0.1:22222</tt>, and <tt>socks5://127.0.0.1:22223</tt> is assigned the route ID of <tt>beta</tt></li>
<li>The chain consisting of <tt>socks5://127.0.0.1:33331</tt>, <tt>socks5://127.0.0.1:33332</tt>, and <tt>socks5://127.0.0.1:33333</tt> is assigned the route ID of <tt>delta</tt></li>
</ul>
<p>There is another route that is assigned a route ID. That route is the direct route. The direct route uses no chain to route the traffic through. It is assigned by default a route ID of <tt>lastRoute</tt>.</p>
<p>To omit the direct route from being included, have the last chain not assigned a route ID from the setting <tt>chaining.routeId</tt>.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>From the aforementioned examples:</p>
<ul>

<li>The chain consisting of <tt>socks5://127.0.0.1:11111</tt>, <tt>socks5://127.0.0.1:11112</tt>, and <tt>socks5://127.0.0.1:11113</tt> is assigned the route ID of <tt>alpha</tt></li>
<li>The chain consisting of <tt>socks5://127.0.0.1:22221</tt>, <tt>socks5://127.0.0.1:22222</tt>, and <tt>socks5://127.0.0.1:22223</tt> is assigned the route ID of <tt>beta</tt></li>
<li>The chain consisting of <tt>socks5://127.0.0.1:33331</tt>, <tt>socks5://127.0.0.1:33332</tt>, and <tt>socks5://127.0.0.1:33333</tt> is assigned by default the route ID of <tt>lastRoute</tt></li>
</ul>
<p>To change the route ID assigned to the last route, you can set the setting <tt>lastRouteId</tt> to the route ID you want assigned to the last route.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>You can also set the setting <tt>routeSelectionStrategy</tt> to specify the selection strategy for the next route. The default is <tt>CYCLICAL</tt>.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega \
    --setting=routeSelectionStrategy=RANDOM
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
            &lt;value&gt;RANDOM&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>You can also set the setting <tt>routeSelectionLogAction</tt> to specify the logging action to take if a route is selected.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega \
    --setting=routeSelectionStrategy=RANDOM \
    --setting=routeSelectionLogAction=LOG_AS_INFO
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
            &lt;value&gt;RANDOM&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;routeSelectionLogAction&lt;/name&gt;
            &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h2><a name="Using_Rules_to_Manage_Traffic"></a>Using Rules to Manage Traffic</h2>
<p>A rule consists of the following:</p>
<ul>

<li>Rule conditions: fields that altogether evaluate as true if they match a specific instance of traffic</li>
<li>Rule results: fields that are applied if the aforementioned rule conditions evaluate as true for matching a specific instance of traffic</li>
</ul>
<p>On the command line, a rule consists of a space separated list of both rule conditions and rule results.</p>
<p>In the server configuration file, a rule is expressed as a <tt>&lt;rule/&gt;</tt> XML element with a <tt>&lt;ruleConditions/&gt;</tt> XML element and a <tt>&lt;ruleResults/&gt;</tt> XML element.</p>
<p>See <a href="server_configuration.html#Rule_Conditions">Rule Conditions</a> and <a href="server_configuration.html#Rule_Results">Rule Results</a> for more information.</p>
<p>To specify a rule, you would need to have the setting <tt>rule</tt> specify the rule.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allows all forms of traffic&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>To specify multiple rules, you would need to have the setting <tt>rule</tt> specified multiple times with each setting specifying another rule.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    &quot;--setting=rule=socks5.command=CONNECT socks5.desiredDestinationPort=80 socks5.desiredDestinationPort=443 firewallAction=ALLOW&quot; \
    &quot;--setting=rule=socks5.command=CONNECT firewallAction=DENY&quot; \
    --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationPort&lt;/name&gt;
                        &lt;value&gt;80&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationPort&lt;/name&gt;
                        &lt;value&gt;443&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allows the CONNECT command to any server on port 80 or 443&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;DENY&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Denies the CONNECT command to any server on any other port&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>

<p>When a specific instance of traffic is matched by the first rule, that rule is applied and the rest of the rules are ignored. Therefore it is best to have more specific rules specified first and have less specific rules specified last.</p>
<div class="section">
<h3><a name="Rule_Conditions"></a>Rule Conditions</h3>
<p>On the command line, rule conditions consist of a space separated list of rule conditions. Each rule condition consists of the syntax of <tt>NAME=VALUE</tt> where <tt>NAME</tt> is expressed as the name of the rule condition and <tt>VALUE</tt> is expressed as the value assigned to the rule condition.</p>
<p>Partial command line example:</p>

<div>
<div>
<pre class="source">clientAddress=127.0.0.1 clientAddress=0:0:0:0:0:0:0:1
</pre></div></div>

<p>In the server configuration file, rule conditions are expressed in a <tt>&lt;ruleConditions/&gt;</tt> XML element with zero to many <tt>&lt;ruleCondition/&gt;</tt> XML elements. Each <tt>&lt;ruleCondition/&gt;</tt> XML element contains a <tt>&lt;name/&gt;</tt> XML element for the name of the rule condition and the <tt>&lt;value/&gt;</tt> XML element of the value assigned to the rule condition.</p>
<p>Partial server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;ruleConditions&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;127.0.0.1&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;0:0:0:0:0:0:0:1&lt;/value&gt;
    &lt;/ruleCondition&gt;
&lt;/ruleConditions&gt;
</pre></div></div>

<p>Rule conditions within a rule are evaluated as true if each group of one or more rule conditions with the same name is evaluated as true. A group of one or more rule conditions with the same name is evaluated as true if at least one of the rule conditions within that group is evaluated as true. Zero rule conditions within a rule are evaluated as true.</p>
<p>Partial server configuration file examples:</p>

<div>
<div>
<pre class="source">&lt;ruleConditions&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;127.0.0.1&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;0:0:0:0:0:0:0:1&lt;/value&gt;
    &lt;/ruleCondition&gt;
&lt;/ruleConditions&gt;
&lt;!-- evaluates as true if the client address is the IPv4 loopback address or the IPv6 loopback address --&gt;
</pre></div></div>

<div>
<div>
<pre class="source">&lt;ruleConditions&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;socks5.method&lt;/name&gt;
        &lt;value&gt;USERNAME_PASSWORD&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;socks5.user&lt;/name&gt;
        &lt;value&gt;guest&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;socks5.user&lt;/name&gt;
        &lt;value&gt;specialuser&lt;/value&gt;
    &lt;/ruleCondition&gt;
&lt;/ruleConditions&gt;
&lt;!-- evaluates as true if username password authentication was used and the user is either 'guest' or 'specialuser' --&gt;
</pre></div></div>

<div>
<div>
<pre class="source">&lt;ruleConditions/&gt;
&lt;!-- evaluates as true since there are no rule conditions given --&gt;
</pre></div></div>

<p>A complete listing of rule conditions can be found in the <a href="cli.html#Settings_Help">settings help</a> under <tt>SETTING VALUE SYNTAXES</tt> &gt; <tt>GENERAL_RULE_CONDITIONS</tt> and <tt>SETTING VALUE SYNTAXES</tt> &gt; <tt>SOCKS5_RULE_CONDITIONS</tt>.</p></div>
<div class="section">
<h3><a name="Rule_Results"></a>Rule Results</h3>
<p>On the command line, rule results consist of a space separated list of rule results. Each rule result consists of the syntax of <tt>NAME=VALUE</tt> where <tt>NAME</tt> is expressed as the name of the rule result and <tt>VALUE</tt> is expressed as the value assigned to the rule result.</p>
<p>Partial command line example:</p>

<div>
<div>
<pre class="source">firewallAction=ALLOW firewallActionLogAction=LOG_AS_INFO
</pre></div></div>

<p>In the server configuration file, rule result are expressed in a <tt>&lt;ruleResults/&gt;</tt> XML element with zero to many <tt>&lt;ruleResult/&gt;</tt> XML elements. Each <tt>&lt;ruleResult/&gt;</tt> XML element contains a <tt>&lt;name/&gt;</tt> XML element for the name of the rule result and the <tt>&lt;value/&gt;</tt> XML element of the value assigned to the rule result.</p>
<p>Partial configuration file example:</p>

<div>
<div>
<pre class="source">&lt;ruleResults&gt;
    &lt;ruleResult&gt;
        &lt;name&gt;firewallAction&lt;/name&gt;
        &lt;value&gt;ALLOW&lt;/value&gt;
    &lt;/ruleResult&gt;
    &lt;ruleResult&gt;
        &lt;name&gt;firewallActionLogAction&lt;/name&gt;
        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
    &lt;/ruleResult&gt;
&lt;/ruleResults&gt;
</pre></div></div>

<p>Unless otherwise stated, if a rule result of the same name appears more than once in the space separated list or in the <tt>&lt;ruleResults/&gt;</tt> XML element, then only the last rule result of the same name is recognized.</p>
<p>A complete listing of rule results can be found in the <a href="cli.html#Settings_Help">settings help</a> under <tt>SETTING VALUE SYNTAXES</tt> &gt; <tt>GENERAL_RULE_RESULTS</tt> and <tt>SETTING VALUE SYNTAXES</tt> &gt; <tt>SOCKS5_RULE_RESULTS</tt>.</p></div>
<div class="section">
<h3><a name="Allowing_or_Denying_Traffic"></a>Allowing or Denying Traffic</h3>
<p>To allow or deny a specific instance of traffic, you will need the following rule result:</p>
<ul>

<li><tt>firewallAction</tt></li>
</ul>
<p>The value given to the rule result must be either of the following values:</p>
<ul>

<li><tt>ALLOW</tt></li>
<li><tt>DENY</tt></li>
</ul>
<p>This rule result can be used with the following rule conditions:</p>
<ul>

<li><tt>clientAddress</tt></li>
<li><tt>socks5.command</tt></li>
<li><tt>socks5.desiredDestinationAddress</tt></li>
<li><tt>socks5.desiredDestinationPort</tt></li>
<li><tt>socks5.method</tt></li>
<li><tt>socks5.secondServerBoundAddress</tt></li>
<li><tt>socks5.secondServerBoundPort</tt></li>
<li><tt>socks5.serverBoundAddress</tt></li>
<li><tt>socks5.serverBoundPort</tt></li>
<li><tt>socks5.udp.inbound.desiredDestinationAddress</tt></li>
<li><tt>socks5.udp.inbound.desiredDestinationPort</tt></li>
<li><tt>socks5.udp.inbound.sourceAddress</tt></li>
<li><tt>socks5.udp.inbound.sourcePort</tt></li>
<li><tt>socks5.udp.outbound.desiredDestinationAddress</tt></li>
<li><tt>socks5.udp.outbound.desiredDestinationPort</tt></li>
<li><tt>socks5.udp.outbound.sourceAddress</tt></li>
<li><tt>socks5.udp.outbound.sourcePort</tt></li>
<li><tt>socks5.user</tt></li>
<li><tt>socksServerAddress</tt></li>
</ul>
<p><b>Note</b>: for any other rule results to be applied, the rule result <tt>firewallAction</tt> with the value of <tt>ALLOW</tt> must be present.</p>
<p>You can also specify the logging action to take if the rule result <tt>firewallAction</tt> is applied by adding the following rule result:</p>
<ul>

<li><tt>firewallActionLogAction</tt></li>
</ul>
<p>The rule result <tt>firewallActionLogAction</tt> is optional.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    &quot;--setting=rule=socks5.command=BIND socks5.command=UDP_ASSOCIATE firewallAction=DENY firewallActionLogAction=LOG_AS_WARNING&quot; \
    --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;BIND&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;UDP_ASSOCIATE&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;DENY&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallActionLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_WARNING&lt;/value&gt;
                    &lt;/ruleResult&gt;                
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Deny any BIND or UDP ASSOCIATE commands and log as a warning message if they are denied&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Allowing_a_Limited_Number_of_Simultaneous_Instances_of_Traffic"></a>Allowing a Limited Number of Simultaneous Instances of Traffic</h3>
<p>To allow a limited number of simultaneous specific instances of traffic, you will need the following rule result:</p>
<ul>

<li><tt>firewallActionAllowLimit</tt></li>
</ul>
<p>The value given to the rule result must be an integer between 0 (inclusive) and 2147483647 (inclusive)</p>
<p>This rule result can be used with the following rule conditions:</p>
<ul>

<li><tt>clientAddress</tt></li>
<li><tt>socks5.command</tt></li>
<li><tt>socks5.desiredDestinationAddress</tt></li>
<li><tt>socks5.desiredDestinationPort</tt></li>
<li><tt>socks5.method</tt></li>
<li><tt>socks5.secondServerBoundAddress</tt></li>
<li><tt>socks5.secondServerBoundPort</tt></li>
<li><tt>socks5.serverBoundAddress</tt></li>
<li><tt>socks5.serverBoundPort</tt></li>
<li><tt>socks5.user</tt></li>
<li><tt>socksServerAddress</tt></li>
</ul>
<p>You can also specify the logging action to take if the limit on the number of simultaneous specific instances of traffic has been reached by adding the following rule result:</p>
<ul>

<li><tt>firewallActionAllowLimitReachedLogAction</tt></li>
</ul>
<p>The rule result <tt>firewallActionAllowLimitReachedLogAction</tt> is optional.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    &quot;--setting=rule=socks5.method=USERNAME_PASSWORD socks5.user=guest firewallAction=ALLOW firewallActionAllowLimit=50 firewallActionAllowLimitReachedLogAction=LOG_AS_INFO&quot; \
    --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.method&lt;/name&gt;
                        &lt;value&gt;USERNAME_PASSWORD&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.user&lt;/name&gt;
                        &lt;value&gt;guest&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallActionAllowLimit&lt;/name&gt;
                        &lt;value&gt;50&lt;/value&gt;
                    &lt;/ruleResult&gt;                
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallActionAllowLimitReachedLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the user 'guest' from username password authentication 50 simultaneous connections and log as an informational message that the limit has been reached&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Routing_Traffic"></a>Routing Traffic</h3>
<p>To route traffic, you can use the following rule results:</p>
<ul>

<li><tt>routeSelectionStrategy</tt>: Specifies the selection strategy for the next route (This rule result is optional. If this rule result is not specified, the setting <tt>routeSelectionStrategy</tt> is used.)</li>
<li><tt>selectableRouteId</tt>: Specifies the ID for a selectable <a href="server_configuration.html#Chaining_to_Multiple_Specified_Chains_of_Other_SOCKS_Servers">route</a> (This rule result is optional. This rule result can be specified multiple times with each rule result specifying another ID for a selectable route. If this rule result is not specified, all of the routes defined by the settings <tt>chaining.routeId</tt> and <tt>lastRouteId</tt> are selectable.)</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><tt>clientAddress</tt></li>
<li><tt>socks5.command</tt></li>
<li><tt>socks5.desiredDestinationAddress</tt></li>
<li><tt>socks5.desiredDestinationPort</tt></li>
<li><tt>socks5.method</tt></li>
<li><tt>socks5.user</tt></li>
<li><tt>socksServerAddress</tt></li>
</ul>
<p>You can also specify the logging action to take if a route is selected by adding the following rule result:</p>
<ul>

<li><tt>routeSelectionLogAction</tt></li>
</ul>
<p>The rule result <tt>routeSelectionLogAction</tt> is optional. If the rule result is not specified, the setting <tt>routeSelectionLogAction</tt> is used.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega \
    &quot;--setting=rule=socks5.command=CONNECT firewallAction=ALLOW routeSelectionStrategy=RANDOM selectableRouteId=alpha selectableRouteId=beta routeSelectionLogAction=LOG_AS_INFO&quot; \
    &quot;--setting=rule=firewallAction=ALLOW routeSelectionStrategy=CYCLICAL selectableRouteId=omega&quot;
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
                        &lt;value&gt;RANDOM&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;selectableRouteId&lt;/name&gt;
                        &lt;value&gt;alpha&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;selectableRouteId&lt;/name&gt;
                        &lt;value&gt;beta&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;routeSelectionLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Randomly select either route 'alpha' or 'beta' when allowing the CONNECT command and log as an informational message the route that has been selected&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
                        &lt;value&gt;CYCLICAL&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;selectableRouteId&lt;/name&gt;
                        &lt;value&gt;omega&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else to go through route 'omega'&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Redirecting_the_Desired_Destination"></a>Redirecting the Desired Destination</h3>
<p>To redirect the desired destination, you will need either or both of the following rule results:</p>
<ul>

<li><tt>socks5.desiredDestinationAddressRedirect</tt>: Specifies the desired destination address redirect</li>
<li><tt>socks5.desiredDestinationPortRedirect</tt>: Specifies the desired destination port redirect</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><tt>clientAddress</tt></li>
<li><tt>socks5.command</tt></li>
<li><tt>socks5.desiredDestinationAddress</tt></li>
<li><tt>socks5.desiredDestinationPort</tt></li>
<li><tt>socks5.method</tt></li>
<li><tt>socks5.user</tt></li>
<li><tt>socksServerAddress</tt></li>
</ul>
<p>You can also specify the logging action to take if the desired destination is redirected by adding the following rule result:</p>
<ul>

<li><tt>socks5.desiredDestinationRedirectLogAction</tt></li>
</ul>
<p>The rule result <tt>socks5.desiredDestinationRedirectLogAction</tt> is optional.</p>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    &quot;--setting=rule=socks5.desiredDestinationAddress=discontinuedserver.com firewallAction=ALLOW socks5.desiredDestinationAddressRedirect=newserver.com socks5.desiredDestinationRedirectLogAction=LOG_AS_INFO&quot; \
    --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;discontinuedserver.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.desiredDestinationAddressRedirect&lt;/name&gt;
                        &lt;value&gt;newserver.com&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.desiredDestinationRedirectLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Redirect desired destination 'discontinuedserver.com' to 'newserver.com' and log as an informational message the redirection&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Configuring_Sockets"></a>Configuring Sockets</h3>
<p>To configure the sockets, you will need any of the following rule results:</p>
<ul>

<li><tt>bindHost</tt>: Specifies the binding host name or address for all sockets</li>
<li><tt>bindTcpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all TCP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>bindUdpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all UDP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>clientSocketSetting</tt>: Specifies a socket setting for the client socket (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>externalFacingBindHost</tt>: Specifies the binding host name or address for all external-facing sockets</li>
<li><tt>externalFacingBindTcpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all external-facing TCP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>externalFacingBindUdpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all external-facing UDP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>externalFacingSocketSetting</tt>: Specifies a socket setting for all external-facing sockets (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>internalFacingBindHost</tt>: Specifies the binding host name or address for all internal-facing sockets</li>
<li><tt>internalFacingBindTcpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all internal-facing TCP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>internalFacingBindUdpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all internal-facing UDP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>internalFacingSocketSetting</tt>: Specifies a socket setting for all internal-facing sockets (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socketSetting</tt>: Specifies a socket setting for all sockets (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onBind.inboundSocketSetting</tt>: Specifies a socket setting for the inbound socket (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onBind.listenBindHost</tt>: Specifies the binding host name or address for the listen socket if the provided host address is all zeros</li>
<li><tt>socks5.onBind.listenBindPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for the listen socket if the provided port is zero (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onBind.listenSocketSetting</tt>: Specifies a socket setting for the listen socket (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onCommand.bindHost</tt>: Specifies the binding host name or address for all sockets</li>
<li><tt>socks5.onCommand.bindTcpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all TCP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onCommand.bindUdpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all UDP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onCommand.externalFacingBindHost</tt>: Specifies the binding host name or address for all external-facing sockets</li>
<li><tt>socks5.onCommand.externalFacingBindTcpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all external-facing TCP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onCommand.externalFacingBindUdpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all external-facing UDP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onCommand.externalFacingSocketSetting</tt>: Specifies a socket setting for all external-facing sockets (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onCommand.internalFacingBindHost</tt>: Specifies the binding host name or address for all internal-facing sockets</li>
<li><tt>socks5.onCommand.internalFacingBindTcpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all internal-facing TCP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onCommand.internalFacingBindUdpPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for all internal-facing UDP sockets (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onCommand.internalFacingSocketSetting</tt>: Specifies a socket setting for all internal-facing sockets (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onCommand.socketSetting</tt>: Specifies a socket setting for all sockets (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onConnect.prepareServerFacingSocket</tt>: Specifies the boolean value to indicate if the server-facing socket is to be prepared before connecting (involves applying the specified socket settings, resolving the target host name, and setting the specified timeout on waiting to connect)</li>
<li><tt>socks5.onConnect.serverFacingBindHost</tt>: Specifies the binding host name or address for the server-facing socket</li>
<li><tt>socks5.onConnect.serverFacingBindPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for the server-facing socket (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onConnect.serverFacingConnectTimeout</tt>: Specifies the timeout in milliseconds on waiting for the server-facing socket to connect (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onConnect.serverFacingSocketSetting</tt>: Specifies a socket setting for the server-facing socket (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onUdpAssociate.clientFacingBindHost</tt>: Specifies the binding host name or address for the client-facing UDP socket</li>
<li><tt>socks5.onUdpAssociate.clientFacingBindPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for the client-facing UDP socket (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onUdpAssociate.clientFacingSocketSetting</tt>: Specifies a socket setting for the client-facing UDP socket (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
<li><tt>socks5.onUdpAssociate.peerFacingBindHost</tt>: Specifies the binding host name or address for the peer-facing UDP socket</li>
<li><tt>socks5.onUdpAssociate.peerFacingBindPortRange</tt>: Specifies a binding <a href="reference.html#Port_Range">port range</a> for the peer-facing UDP socket (This rule result can be specified multiple times with each rule result specifying another port range)</li>
<li><tt>socks5.onUdpAssociate.peerFacingSocketSetting</tt>: Specifies a socket setting for the peer-facing UDP socket (This rule result can be specified multiple times with each rule result specifying another socket setting)</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><tt>clientAddress</tt></li>
<li><tt>socks5.command</tt></li>
<li><tt>socks5.desiredDestinationAddress</tt></li>
<li><tt>socks5.desiredDestinationPort</tt></li>
<li><tt>socks5.method</tt></li>
<li><tt>socks5.user</tt></li>
<li><tt>socksServerAddress</tt></li>
</ul>
<p>The rule result <tt>socks5.onBind.inboundSocketSetting</tt> can also be used with the following rule conditions:</p>
<ul>

<li><tt>socks5.serverBoundAddress</tt></li>
<li><tt>socks5.serverBoundPort</tt></li>
</ul>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    &quot;--setting=rule=socks5.command=CONNECT socks5.desiredDestinationAddress=specialserver.com firewallAction=ALLOW socks5.onConnect.prepareServerFacingSocket=true socks5.onConnect.serverFacingSocketSetting=SO_RCVBUF=256 socks5.onConnect.serverFacingSocketSetting=SO_SNDBUF=256&quot; \
    --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;            
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;specialserver.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.prepareServerFacingSocket&lt;/name&gt;
                        &lt;value&gt;true&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.serverFacingSocketSetting&lt;/name&gt;
                        &lt;socketSetting&gt;
                            &lt;name&gt;SO_RCVBUF&lt;/name&gt;
                            &lt;value&gt;256&lt;/value&gt;
                        &lt;/socketSetting&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.serverFacingSocketSetting&lt;/name&gt;
                        &lt;socketSetting&gt;
                            &lt;name&gt;SO_SNDBUF&lt;/name&gt;
                            &lt;value&gt;256&lt;/value&gt;
                        &lt;/socketSetting&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the CONNECT command to connect to 'specialserver.com' and configure the server-facing socket for the CONNECT command&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Configuring_Relay_Settings"></a>Configuring Relay Settings</h3>
<p>To configure the relay settings, you will need any of the following rule results:</p>
<ul>

<li><tt>socks5.onBind.relayBufferSize</tt>: Specifies the buffer size in bytes for relaying the data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onBind.relayIdleTimeout</tt>: Specifies the timeout in milliseconds on relaying no data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onCommand.relayBufferSize</tt>: Specifies the buffer size in bytes for relaying the data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onCommand.relayIdleTimeout</tt>: Specifies the timeout in milliseconds on relaying no data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onConnect.relayBufferSize</tt>: Specifies the buffer size in bytes for relaying the data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onConnect.relayIdleTimeout</tt>: Specifies the timeout in milliseconds on relaying no data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onUdpAssociate.relayBufferSize</tt>: Specifies the buffer size in bytes for relaying the data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><tt>socks5.onUdpAssociate.relayIdleTimeout</tt>: Specifies the timeout in milliseconds on relaying no data (Value must be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><tt>clientAddress</tt></li>
<li><tt>socks5.command</tt></li>
<li><tt>socks5.desiredDestinationAddress</tt></li>
<li><tt>socks5.desiredDestinationPort</tt></li>
<li><tt>socks5.method</tt></li>
<li><tt>socks5.secondServerBoundAddress</tt></li>
<li><tt>socks5.secondServerBoundPort</tt></li>
<li><tt>socks5.serverBoundAddress</tt></li>
<li><tt>socks5.serverBoundPort</tt></li>
<li><tt>socks5.user</tt></li>
<li><tt>socksServerAddress</tt></li>
</ul>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    &quot;--setting=rule=socks5.command=CONNECT socks5.desiredDestinationAddress=intermittent-idling-server.com firewallAction=ALLOW socks5.onConnect.relayIdleTimeout=1024000&quot; \
    --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;            
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;intermittent-idling-server.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.relayIdleTimeout&lt;/name&gt;
                        &lt;value&gt;1024000&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the CONNECT command to connect to 'intermittent-idling-server.com' with a relay idle timeout of 1024000 milliseconds (1024 seconds)&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Limiting_Relay_Bandwidth"></a>Limiting Relay Bandwidth</h3>
<p>To limit the relay bandwidth, you will need any of the following rule results:</p>
<ul>

<li><tt>socks5.onBind.relayInboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving inbound data to be relayed</li>
<li><tt>socks5.onBind.relayOutboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving outbound data to be relayed</li>
<li><tt>socks5.onCommand.relayInboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving inbound data to be relayed</li>
<li><tt>socks5.onCommand.relayOutboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving outbound data to be relayed</li>
<li><tt>socks5.onConnect.relayInboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving inbound data to be relayed</li>
<li><tt>socks5.onConnect.relayOutboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving outbound data to be relayed</li>
<li><tt>socks5.onUdpAssociate.relayInboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving inbound data to be relayed</li>
<li><tt>socks5.onUdpAssociate.relayOutboundBandwidthLimit</tt>: Specifies the upper limit on bandwidth in bytes per second of receiving outbound data to be relayed</li>
</ul>
<p>The value given to any of the rule results must be an integer between 1 (inclusive) and 2147483647 (inclusive)</p>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><tt>clientAddress</tt></li>
<li><tt>socks5.command</tt></li>
<li><tt>socks5.desiredDestinationAddress</tt></li>
<li><tt>socks5.desiredDestinationPort</tt></li>
<li><tt>socks5.method</tt></li>
<li><tt>socks5.secondServerBoundAddress</tt></li>
<li><tt>socks5.secondServerBoundPort</tt></li>
<li><tt>socks5.serverBoundAddress</tt></li>
<li><tt>socks5.serverBoundPort</tt></li>
<li><tt>socks5.user</tt></li>
<li><tt>socksServerAddress</tt></li>
</ul>
<p>Command line example:</p>

<div>
<div>
<pre class="source">./bin/jargyle start-server \
    &quot;--setting=rule=socks5.command=CONNECT socks5.desiredDestinationAddress=streamingwebsite.com firewallAction=ALLOW socks5.onConnect.relayInboundBandwidthLimit=1024000 socks5.onConnect.relayOutboundBandwidthLimit=1024000&quot; \
    --setting=rule=firewallAction=ALLOW
</pre></div></div>

<p>Server configuration file example:</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;            
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;streamingwebsite.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                         &lt;name&gt;socks5.onConnect.relayInboundBandwidthLimit&lt;/name&gt;
                        &lt;value&gt;1024000&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                         &lt;name&gt;socks5.onConnect.relayOutboundBandwidthLimit&lt;/name&gt;
                        &lt;value&gt;1024000&lt;/value&gt;
                    &lt;/ruleResult&gt;                
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the CONNECT command to connect to 'streamingwebsite.com' with an upper limit on the relay inbound and outbound bandwidth of 1024000 bytes per second&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</pre></div></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2023.All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
