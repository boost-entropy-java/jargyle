<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M13 from src/site/markdown/server_configuration.md at 2023-11-11
 | Rendered using Apache Maven Fluido Skin 2.0.0-M8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M13" />
    <title>Jargyle â€“ Server Configuration</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M8.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-11-11<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 5.0.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="licenses.html">License</a></li>
   <li class="nav-header">About Jargyle</li>
    <li><a href="requirements.html">Requirements</a></li>
    <li><a href="releases.html">Releases</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="cli.html">Command Line Interface</a></li>
    <li class="active"><a>Server Configuration</a></li>
    <li><a href="reference.html">Reference</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section>
<h1>Server Configuration</h1><section>
<h2>Page Contents</h2>
<ul>

<li><a href="#enabling-ssl-tls-for-tcp-traffic-between-the-server-and-its-clients">Enabling SSL/TLS for TCP Traffic Between the Server and Its Clients</a></li>
<li><a href="#enabling-dtls-for-udp-traffic-between-the-server-and-its-clients">Enabling DTLS for UDP Traffic Between the Server and Its Clients</a></li>
<li><a href="#using-socks5-authentication">Using SOCKS5 Authentication</a>
<ul>

<li><a href="#using-no-authentication">Using No Authentication</a></li>
<li><a href="#using-username-password-authentication">Using Username Password Authentication</a></li>
<li><a href="#using-gss-api-authentication">Using GSS-API Authentication</a></li>
</ul></li>
<li><a href="#chaining-to-another-socks-server">Chaining to Another SOCKS Server</a>
<ul>

<li><a href="#enabling-ssl-tls-for-tcp-traffic-between-the-server-and-the-other-socks-server">Enabling SSL/TLS for TCP Traffic Between the Server and the Other SOCKS Server</a></li>
<li><a href="#enabling-dtls-for-udp-traffic-between-the-server-and-the-other-socks-server">Enabling DTLS for UDP Traffic Between the Server and the Other SOCKS Server</a></li>
<li><a href="#chaining-to-the-other-socks-server-using-socks5-authentication">Chaining to the Other SOCKS Server Using SOCKS5 Authentication</a>
<ul>

<li><a href="#chaining-to-the-other-socks-server-using-no-authentication">Chaining to the Other SOCKS Server Using No Authentication</a></li>
<li><a href="#chaining-to-the-other-socks-server-using-username-password-authentication">Chaining to the Other SOCKS Server Using Username Password Authentication</a></li>
<li><a href="#chaining-to-the-other-socks-server-using-gss-api-authentication">Chaining to the Other SOCKS Server Using GSS-API Authentication</a></li>
</ul></li>
<li><a href="#resolving-host-names-from-the-other-socks5-server">Resolving Host Names From the Other SOCKS5 Server</a></li>
</ul></li>
<li><a href="#chaining-to-a-specified-chain-of-other-socks-servers">Chaining to a Specified Chain of Other SOCKS Servers</a></li>
<li><a href="#chaining-to-multiple-specified-chains-of-other-socks-servers">Chaining to Multiple Specified Chains of Other SOCKS Servers</a></li>
<li><a href="#using-rules-to-manage-traffic">Using Rules to Manage Traffic</a>
<ul>

<li><a href="#rule-conditions">Rule Conditions</a></li>
<li><a href="#rule-results">Rule Results</a></li>
<li><a href="#allowing-or-denying-traffic">Allowing or Denying Traffic</a></li>
<li><a href="#allowing-a-limited-number-of-simultaneous-instances-of-traffic">Allowing a Limited Number of Simultaneous Instances of Traffic</a></li>
<li><a href="#routing-traffic">Routing Traffic</a></li>
<li><a href="#redirecting-the-desired-destination">Redirecting the Desired Destination</a></li>
<li><a href="#configuring-sockets">Configuring Sockets</a></li>
<li><a href="#configuring-relay-settings">Configuring Relay Settings</a></li>
<li><a href="#limiting-relay-bandwidth">Limiting Relay Bandwidth</a></li>
</ul></li>
</ul></section><section>
<h2>Enabling SSL/TLS for TCP Traffic Between the Server and Its Clients</h2>
<p>You can enable SSL/TLS for TCP traffic between the server and its clients. By
default SSL/TLS for TCP traffic between the server and its clients is disabled.
To enable SSL/TLS for TCP traffic between the server and its clients, you will
need to have the setting <code>ssl.enabled</code> set to <code>true</code>. In addition, you will
need to have the setting <code>ssl.keyStoreFile</code> to specify the server's key store
file (this file would need to be created by Java's keytool utility). Also, you
will need to have the setting <code>ssl.keyStorePassword</code> to specify the password
for the server's key store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --setting=ssl.keyStorePassword=password
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-ssl-key-store-pass</code> instead. It will provide an interactive
prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --enter-ssl-key-store-pass
</code></pre></div>
<p>If you want to have the client authenticate using SSL/TLS, you will need to have
the setting <code>ssl.needClientAuth</code> set to <code>true</code>. In addition, you will need
to have the setting <code>ssl.trustStoreFile</code> to specify the client's key store
file to be used as a trust store (this file would need to be created by Java's
keytool utility). Also, you will need to have the setting
<code>ssl.trustStorePassword</code> to specify the password for the client's trust
store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --setting=ssl.keyStorePassword=password \
    --setting=ssl.needClientAuth=true \
    --setting=ssl.trustStoreFile=client.jks \
    --setting=ssl.trustStorePassword=drowssap
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.needClientAuth&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.trustStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;ssl.trustStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-ssl-trust-store-pass</code> instead. It will provide an
interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=ssl.enabled=true \
    --setting=ssl.keyStoreFile=server.jks \
    --enter-ssl-key-store-pass \
    --setting=ssl.needClientAuth=true \
    --setting=ssl.trustStoreFile=client.jks \
    --enter-ssl-trust-store-pass
</code></pre></div></section><section>
<h2>Enabling DTLS for UDP Traffic Between the Server and Its Clients</h2>
<p>You can enable DTLS for UDP traffic between the server and its clients. By
default DTLS for UDP traffic between the server and its clients is disabled. To
enable DTLS for UDP traffic between the server and its clients, you will need to
have the setting <code>dtls.enabled</code> set to <code>true</code>. In addition, you will need to
have the setting <code>dtls.keyStoreFile</code> to specify the server's key store file
(this file would need to be created by Java's keytool utility). Also, you will
need to have the setting <code>dtls.keyStorePassword</code> to specify the password for
the server's key store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --setting=dtls.keyStorePassword=password
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-dtls-key-store-pass</code> instead. It will provide an
interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --enter-dtls-key-store-pass
</code></pre></div>
<p>If you want to have the client authenticate using DTLS, you will need to have
the setting <code>dtls.needClientAuth</code> set to <code>true</code>. In addition, you will need
to have the setting <code>dtls.trustStoreFile</code> to specify the client's key store
file to be used as a trust store (this file would need to be created by Java's
keytool utility). Also, you will need to have the setting
<code>dtls.trustStorePassword</code> to specify the password for the client's trust
store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --setting=dtls.keyStorePassword=password \
    --setting=dtls.needClientAuth=true \
    --setting=dtls.trustStoreFile=client.jks \
    --setting=dtls.trustStorePassword=drowssap
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.keyStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.needClientAuth&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.trustStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;dtls.trustStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-dtls-trust-store-pass</code> instead. It will provide an
interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=dtls.enabled=true \
    --setting=dtls.keyStoreFile=server.jks \
    --enter-dtls-key-store-pass \
    --setting=dtls.needClientAuth=true \
    --setting=dtls.trustStoreFile=client.jks \
    --enter-dtls-trust-store-pass
</code></pre></div></section><section>
<h2>Using SOCKS5 Authentication</h2>
<p>The server has the following SOCKS5 authentication methods to choose from:</p>
<ul>

<li><code>NO_AUTHENTICATION_REQUIRED</code>: No authentication required</li>
<li><code>GSSAPI</code>: GSS-API authentication</li>
<li><code>USERNAME_PASSWORD</code>: Username password authentication</li>
</ul>
<p>On the command line, you can have one or more of the aforementioned
authentication methods set in the setting <code>socks5.methods</code> as a comma
separated list.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server --setting=socks5.methods=NO_AUTHENTICATION_REQUIRED,GSSAPI
</code></pre></div>
<p>In the server configuration file, you can have one or more of the aforementioned
authentication methods set in the setting <code>socks5.methods</code> as a
<code>&lt;socks5.methods/&gt;</code> XML element with one or more <code>&lt;socks5.method/&gt;</code> XML
elements each specifying an authentication method.</p>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If not set, the default value for the setting <code>socks5.methods</code> is set to <code>NO_AUTHENTICATION_REQUIRED</code></p><section>
<h3>Using No Authentication</h3>
<p>Because the default value for the setting <code>socks5.methods</code> is set to
<code>NO_AUTHENTICATION_REQUIRED</code>, it is not required for
<code>NO_AUTHENTICATION_REQUIRED</code> to be included in the setting
<code>socks5.methods</code>.</p>
<p>However, if other authentication methods are to be used in addition to
<code>NO_AUTHENTICATION_REQUIRED</code>, <code>NO_AUTHENTICATION_REQUIRED</code> must be
included in the setting <code>socks5.methods</code></p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server --setting=socks5.methods=NO_AUTHENTICATION_REQUIRED,GSSAPI,USERNAME_PASSWORD
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;NO_AUTHENTICATION_REQUIRED&lt;/socks5.method&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Using Username Password Authentication</h3>
<p>To use username password authentication, you will need to have the setting
<code>socks5.methods</code> to have <code>USERNAME_PASSWORD</code> included.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server --setting=socks5.methods=USERNAME_PASSWORD
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>Also, you will need to have the setting <code>socks5.userpassauth.userRepository</code>
to specify the type name of the user repository along with an initialization
string value.</p>
<p>The following are two type names you can use:</p>
<ul>

<li><code>FileSourceUserRepository</code></li>
<li><code>StringSourceUserRepository</code></li>
</ul>
<p><code>FileSourceUserRepository</code>: This user repository handles the storage of the
SOCKS5 users from a file whose name is provided as an initialization string
value. The SOCKS5 users from the file are loaded onto memory. Because of this,
you will need at least as much memory as the size of the file. If the file does
not exist, it will be created and used. If the file does exist, the existing
file will be used. To manage SOCKS5 users under a user repository, see
<a href="cli.html#managing-socks5-users">Managing SOCKS5 Users</a>.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=socks5.methods=USERNAME_PASSWORD \
    --setting=socks5.userpassauth.userRepository=FileSourceUserRepository:users
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.userpassauth.userRepository&lt;/name&gt;
            &lt;socks5.userpassauth.userRepository&gt;
                &lt;typeName&gt;FileSourceUserRepository&lt;/typeName&gt;
                &lt;initializationString&gt;users&lt;/initializationString&gt;
            &lt;/socks5.userpassauth.userRepository&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p><code>StringSourceUserRepository</code>: This user repository handles the storage of
the SOCKS5 users from the initialization string value of a comma separated list
of URL encoded username password values.</p>
<p>Each username password value in the comma separated list must be of the
following format:</p>

<div class="verbatim">
<pre><code>USERNAME:PASSWORD
</code></pre></div>
<p>Where <code>USERNAME</code> is the username and <code>PASSWORD</code> is the password.</p>
<p>If the username or the password contains a colon character (<code>:</code>), then each
colon character must be replaced with the URL encoding character <code>%3A</code>.</p>
<p>If the username or the password contains a space character, then each space
character must be replaced with the URL encoding character <code>+</code> or <code>%20</code>.</p>
<p>If the username or the password contains a plus sign character (<code>+</code>) not used
for URL encoding, then each plus sign character not used for URL encoding must
be replaced with the URL encoding character <code>%2B</code>.</p>
<p>If the username or the password contains a percent sign character (<code>%</code>) not
used for URL encoding, then each percent sign character not used for URL
encoding must be replaced with the URL encoding character <code>%25</code>.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=socks5.methods=USERNAME_PASSWORD \
    --setting=socks5.userpassauth.userRepository=StringSourceUserRepository:Aladdin:opensesame,Jasmine:mission%3Aimpossible
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.userpassauth.userRepository&lt;/name&gt;
            &lt;socks5.userpassauth.userRepository&gt;
                &lt;typeName&gt;StringSourceUserRepository&lt;/typeName&gt;
                &lt;initializationString&gt;Aladdin:opensesame,Jasmine:mission%3Aimpossible&lt;/initializationString&gt;
            &lt;/socks5.userpassauth.userRepository&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Using GSS-API Authentication</h3>
<p>To use GSS-API authentication, you will need to have the setting
<code>socks5.methods</code> to have <code>GSSAPI</code> included.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server --setting=socks5.methods=GSSAPI
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>Also, you will need to specify Java system properties to use a security
mechanism that implements the GSS-API (for example, Kerberos is a security
mechanism that implements the GSS-API).</p>
<p>The following are sufficient examples of using the Kerberos security mechanism:</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
./bin/jargyle start-server --setting=socks5.methods=GSSAPI 
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;!--
Before running this file, the following must be executed:
export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
--&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>The Java system property <code>javax.security.auth.useSubjectCredsOnly</code> with
the value <code>false</code> disables JAAS-based authentication to obtain the credentials
directly and lets the underlying security mechanism obtain them instead.</p>
<p>The Java system property <code>java.security.auth.login.config</code> with the value
<code>login.conf</code> provides a JAAS configuration file for the underlying security
mechanism.</p>
<p><code>login.conf</code>:</p>

<div class="verbatim">
<pre><code>com.sun.security.jgss.accept {
  com.sun.security.auth.module.Krb5LoginModule required
  principal=&quot;rcmd/127.0.0.1&quot;
  useKeyTab=true
  keyTab=&quot;rcmd.keytab&quot;
  storeKey=true;
};
</code></pre></div>
<p>In <code>login.conf</code>, <code>rcmd/127.0.0.1</code> is a service principal that is created by
a Kerberos administrator specifically for a SOCKS5 server with the service name
<code>rcmd</code> residing at the address <code>127.0.0.1</code>. (In a production environment, the
address <code>127.0.0.1</code> should be replaced by the name of the machine of where the
SOCKS5 server resides.)</p>
<p>Also in <code>login.conf</code>, <code>rcmd.keytab</code> is a keytab file also created by a
Kerberos administrator that contains the aforementioned service principal and
its respective encrypted key.</p>
<p>The Java system property <code>java.security.krb5.conf</code> with the value
<code>krb5.conf</code> provides the Kerberos configuration file that points to the
Kerberos Key Distribution Center (KDC) for authentication.</p>
<p><code>krb5.conf</code>:</p>

<div class="verbatim">
<pre><code>[libdefaults]
    kdc_realm = EXAMPLE.COM
    default_realm = EXAMPLE.COM
    udp_preference_limit = 4096
    kdc_tcp_port = 12345
    kdc_udp_port = 12345

[realms]
    EXAMPLE.COM = {
        kdc = 127.0.0.1:12345
    }
</code></pre></div>
<p>In <code>krb5.conf</code>, a KDC is defined as running at the address <code>127.0.0.1</code> on
port <code>12345</code> with its realm as <code>EXAMPLE.COM</code>. (In a production environment,
the address <code>127.0.0.1</code> should be replaced by the actual address or name of
the machine of where the KDC resides. Also, in a production environment, the
realm <code>EXAMPLE.COM</code> should be replaced by an actual realm provided by a
Kerberos administrator.)</p></section></section><section>
<h2>Chaining to Another SOCKS Server</h2>
<p>You can have the server chained to another SOCKS server, meaning that its
traffic can be routed through another SOCKS server. To have the server chained
to another SOCKS server, you will need to specify the other SOCKS server as a
URI in the setting <code>chaining.socksServerUri</code></p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server --setting=chaining.socksServerUri=socks5://127.0.0.1:23456
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>Please note that the scheme in the URI specifies the SOCKS protocol to be used
when accessing the other SOCKS server (<code>socks5</code>), the address or name of the
machine of where the other SOCKS server resides (<code>127.0.0.1</code>), and the port
number of the other SOCKS server (<code>23456</code>). In the aforementioned examples, the
SOCKS protocol version 5 is used. At this time, the only supported scheme for
the URI format is <code>socks5</code></p><section>
<h3>Enabling SSL/TLS for TCP Traffic Between the Server and the Other SOCKS Server</h3>
<p>You can enable SSL/TLS for TCP traffic between the server and the other SOCKS
server under the following condition:</p>
<ul>

<li>The other SOCKS server accepts SSL/TLS connections.</li>
</ul>
<p>By default SSL/TLS for TCP traffic between the server and the other SOCKS server
is disabled. To enable SSL/TLS for TCP traffic between the server and the other
SOCKS server, you will need to have the setting <code>chaining.ssl.enabled</code> set
to <code>true</code>. In addition, you will need to have the setting
<code>chaining.ssl.trustStoreFile</code> to specify the other SOCKS server's key store
file used as a trust store (this file would need to be created by Java's keytool
utility). Also, you will need to have the setting
<code>chaining.ssl.trustStorePassword</code> to specify the password for the other
SOCKS server's trust store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --setting=chaining.ssl.trustStorePassword=password
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-chaining-ssl-trust-store-pass</code> instead. It will provide
an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --enter-chaining-ssl-trust-store-pass
</code></pre></div>
<p>If the other SOCKS server wants the client (the server) to authenticate using
SSL/TLS, you will need to have the setting <code>chaining.ssl.keyStoreFile</code> to
specify the client's key store file (this file would need to be created by
Java's keytool utility). Also, you will need to have the setting
<code>chaining.ssl.keyStorePassword</code> to specify the password for the client's
key store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.keyStoreFile=client.jks \
    --setting=chaining.ssl.keyStorePassword=drowssap \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --setting=chaining.ssl.trustStorePassword=password    
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.keyStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.keyStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.ssl.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-chaining-ssl-key-store-pass</code> instead. It will provide an
interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.ssl.enabled=true \
    --setting=chaining.ssl.keyStoreFile=client.jks \
    --enter-chaining-ssl-key-store-pass \
    --setting=chaining.ssl.trustStoreFile=server.jks \
    --enter-chaining-ssl-trust-store-pass
</code></pre></div></section><section>
<h3>Enabling DTLS for UDP Traffic Between the Server and the Other SOCKS Server</h3>
<p>You can enable DTLS for UDP traffic between the server and the other SOCKS
server under the following condition:</p>
<ul>

<li>The other SOCKS server accepts DTLS connections.</li>
</ul>
<p>By default DTLS for UDP traffic between the server and the other SOCKS server is
disabled. To enable DTLS for UDP traffic between the server and the other SOCKS
server, you will need to have the setting <code>chaining.dtls.enabled</code> set to
<code>true</code>. In addition, you will need to have the setting
<code>chaining.dtls.trustStoreFile</code> to specify the other SOCKS server's key
store file used as a trust store (this file would need to be created by Java's
keytool utility). Also, you will need to have the setting <code>chaining.dtls.trustStorePassword</code> to specify the password for the other
SOCKS server's trust store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --setting=chaining.dtls.trustStorePassword=password
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-chaining-dtls-trust-store-pass</code> instead. It will provide
an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --enter-chaining-dtls-trust-store-pass
</code></pre></div>
<p>If the other SOCKS server wants the client (the server) to authenticate using
DTLS, you will need to have the setting <code>chaining.dtls.keyStoreFile</code> to
specify the client's key store file (this file would need to be created by
Java's keytool utility). Also, you will need to have the setting
<code>chaining.dtls.keyStorePassword</code> to specify the password for the client's
key store file.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.keyStoreFile=client.jks \
    --setting=chaining.dtls.keyStorePassword=drowssap \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --setting=chaining.dtls.trustStorePassword=password    
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.enabled&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.keyStoreFile&lt;/name&gt;
            &lt;value&gt;client.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.keyStorePassword&lt;/name&gt;
            &lt;value&gt;drowssap&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStoreFile&lt;/name&gt;
            &lt;value&gt;server.jks&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.dtls.trustStorePassword&lt;/name&gt;
            &lt;value&gt;password&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-chaining-dtls-key-store-pass</code> instead. It will provide an
interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.dtls.enabled=true \
    --setting=chaining.dtls.keyStoreFile=client.jks \
    --enter-chaining-dtls-key-store-pass \
    --setting=chaining.dtls.trustStoreFile=server.jks \
    --enter-chaining-dtls-trust-store-pass
</code></pre></div></section><section>
<h3>Chaining to the Other SOCKS Server Using SOCKS5 Authentication</h3>
<p>The server has the following SOCKS5 authentication methods to choose from when
chaining to the other SOCKS5 server:</p>
<ul>

<li><code>NO_AUTHENTICATION_REQUIRED</code>: No authentication required</li>
<li><code>GSSAPI</code>: GSS-API authentication</li>
<li><code>USERNAME_PASSWORD</code>: Username password authentication</li>
</ul>
<p>On the command line, you can have one or more of the aforementioned
authentication methods set in the setting <code>chaining.socks5.methods</code> as a
comma separated list.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=NO_AUTHENTICATION_REQUIRED,GSSAPI
</code></pre></div>
<p>In the configuration file, you can have one or more of the aforementioned
authentication methods set in the setting <code>chaining.socks5.methods</code> as a
<code>&lt;socks5.methods/&gt;</code> XML element with one or more <code>&lt;socks5.method/&gt;</code> XML
elements each specifying an authentication method.</p>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If not set, the default value for the setting <code>chaining.socks5.methods</code> is
set to <code>NO_AUTHENTICATION_REQUIRED</code></p><section>
<h4>Chaining to the Other SOCKS Server Using No Authentication</h4>
<p>Because the default value for the setting <code>chaining.socks5.methods</code> is set
to <code>NO_AUTHENTICATION_REQUIRED</code>, it is not required for
<code>NO_AUTHENTICATION_REQUIRED</code> to be included in the setting
<code>chaining.socks5.methods</code>.</p>
<p>However, if other authentication methods are to be used in addition to
<code>NO_AUTHENTICATION_REQUIRED</code>, <code>NO_AUTHENTICATION_REQUIRED</code> must be
included in the setting <code>chaining.socks5.methods</code></p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=NO_AUTHENTICATION_REQUIRED,GSSAPI,USERNAME_PASSWORD
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;NO_AUTHENTICATION_REQUIRED&lt;/socks5.method&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h4>Chaining to the Other SOCKS Server Using Username Password Authentication</h4>
<p>To chain to the other SOCKS server using username password authentication, you
will need to have the setting <code>chaining.socks5.methods</code> to have
<code>USERNAME_PASSWORD</code> included.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>Also, you will need to have the settings
<code>chaining.socks5.userpassauth.username</code> and
<code>chaining.socks5.userpassauth.password</code> respectively specify the username
and password for the other SOCKS5 server.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD \
    --setting=chaining.socks5.userpassauth.username=Aladdin \
    --setting=chaining.socks5.userpassauth.password=opensesame
    
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.username&lt;/name&gt;
            &lt;value&gt;Aladdin&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.password&lt;/name&gt;
            &lt;value&gt;opensesame&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>If you do not want to have the password appear in any script or in any part of
the command line history for security reasons, you can use the command line
option <code>--enter-chaining-socks5-userpassauth-pass</code> instead. It will
provide an interactive prompt for you to enter the password.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD \
    --setting=chaining.socks5.userpassauth.username=Aladdin \
    --enter-chaining-socks5-userpassauth-pass
</code></pre></div></section><section>
<h4>Chaining to the Other SOCKS Server Using GSS-API Authentication</h4>
<p>To chain to the other SOCKS server using GSS-API authentication, you will need
to have the setting <code>chaining.socks5.methods</code> to have <code>GSSAPI</code> included.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=GSSAPI
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>Also, you will need to specify Java system properties to use a security
mechanism that implements the GSS-API (for example, Kerberos is a security
mechanism that implements the GSS-API), and you will also need to specify the
GSS-API service name for the other SOCKS5 server.</p>
<p>The following are sufficient examples of using the Kerberos security mechanism:</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=GSSAPI \
    --setting=chaining.socks5.gssapiauth.serviceName=rcmd/127.0.0.1 
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
&lt;!--
Before running this file, the following must be executed:
export JARGYLE_OPTS=&quot;-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.auth.login.config=login.conf -Djava.security.krb5.conf=krb5.conf&quot;
--&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.gssapiauth.serviceName&lt;/name&gt;
            &lt;value&gt;rcmd/127.0.0.1&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>The Java system property <code>javax.security.auth.useSubjectCredsOnly</code> with
the value <code>false</code> disables JAAS-based authentication to obtain the credentials
directly and lets the underlying security mechanism obtain them instead.</p>
<p>The Java system property <code>java.security.auth.login.config</code> with the value
<code>login.conf</code> provides a JAAS configuration file for the underlying security
mechanism.</p>
<p><code>login.conf</code>:</p>

<div class="verbatim">
<pre><code>com.sun.security.jgss.initiate {
  com.sun.security.auth.module.Krb5LoginModule required
  principal=&quot;alice&quot;
  useKeyTab=true
  keyTab=&quot;alice.keytab&quot;
  storeKey=true;
};
</code></pre></div>
<p>In <code>login.conf</code>, <code>alice</code> is a principal that is created by a Kerberos
administrator.</p>
<p>Also in <code>login.conf</code>, <code>alice.keytab</code> is a keytab file also created by a
Kerberos administrator that contains the aforementioned principal and its
respective encrypted key.</p>
<p>The Java system property <code>java.security.krb5.conf</code> with the value
<code>krb5.conf</code> provides the Kerberos configuration file that points to the
Kerberos Key Distribution Center (KDC) for authentication.</p>
<p><code>krb5.conf</code>:</p>

<div class="verbatim">
<pre><code>[libdefaults]
    kdc_realm = EXAMPLE.COM
    default_realm = EXAMPLE.COM
    udp_preference_limit = 4096
    kdc_tcp_port = 12345
    kdc_udp_port = 12345

[realms]
    EXAMPLE.COM = {
        kdc = 127.0.0.1:12345
    }
</code></pre></div>
<p>In <code>krb5.conf</code>, a KDC is defined as running at the address <code>127.0.0.1</code> on
port <code>12345</code> with its realm as <code>EXAMPLE.COM</code>. (In a production environment,
the address <code>127.0.0.1</code> should be replaced by the actual address or name of
the machine of where the KDC resides. Also, in a production environment, the
realm <code>EXAMPLE.COM</code> should be replaced by an actual realm provided by a
Kerberos administrator.)</p>
<p>The setting <code>chaining.socks5.gssapiauth.serviceName</code> with the value
<code>rcmd/127.0.0.1</code> is the GSS-API service name (or the Kerberos service
principal) for the other SOCKS server residing at the address <code>127.0.0.1</code>. (In
a production environment, the address <code>127.0.0.1</code> should be replaced by the
name of the machine of where the other SOCKS server resides.)</p></section></section><section>
<h3>Resolving Host Names From the Other SOCKS5 Server</h3>
<p>Before discussing host name resolution from the other SOCKS5 server, a brief
explanation of the server's internals:</p>
<p>The server uses sockets to interact with the external world.</p>
<ul>

<li>Under the CONNECT command, it uses a socket that connects to the desired
target server. In this documentation, this socket is called the server-facing
socket.</li>
<li>Under the BIND command, it uses a socket that listens for an inbound socket.
In this documentation, this socket is called the listen socket.</li>
<li>Under the UDP ASSOCIATE command, it uses a UDP socket that sends and
receives datagram packets to and from peer UDP sockets. In this documentation,
this UDP socket is called the peer-facing UDP socket.</li>
</ul>
<p>The server also uses a host resolver to resolve host names for the
aforementioned sockets and for
<a href="reference.html#the-socks5-resolve-command">the RESOLVE command</a>.</p>
<p>When the server is chained to another SOCKS5 server, the aforementioned sockets
that the server uses become SOCKS5-enabled, meaning that their traffic is routed
through the other SOCKS5 server.</p>
<p>It is similar for the host resolver. When the server is chained to another
SOCKS5 server, the host resolver that the server uses becomes SOCKS5-enabled,
meaning that it can use the other SOCKS5 server to resolve host names provided
that the other SOCKS5 server supports the SOCKS5 RESOLVE command. However, this
functionality for the host resolver is disabled by default making the host
resolver resolve host names through the local system.</p>
<p>Therefore, default host name resolution from the other SOCKS5 server is
performed but has the following limitations:</p>
<p>Default host name resolution from the other SOCKS5 server OCCURS ONLY&#x2026;</p>
<ul>

<li>&#x2026;under the CONNECT command when the server-facing socket makes an
extemporaneous outbound connection. Preparation is omitted for the server-facing
socket. Such preparation includes applying the specified socket settings for the
server-facing socket, resolving the target host name before connecting, and
setting the specified timeout in milliseconds on waiting for the server-facing
socket to connect. The host resolver is not used in resolving the target host
name. When the server-facing socket is SOCKS5-enabled, the target host name is
resolved by the other SOCKS5 server and not through the local system.</li>
</ul>
<p>Default host name resolution from the other SOCKS5 server DOES NOT OCCUR&#x2026;</p>
<ul>

<li>&#x2026;under the CONNECT command when the server-facing socket makes a prepared
outbound connection. Preparation for the server-facing socket includes resolving
the target host name before connecting. The host resolver is used in resolving
the target host name. Because of its default functionality, the host resolver
resolves the target host name through the local system.</li>
<li>&#x2026;under the BIND command when resolving the binding host name for the
listen socket. The host resolver is used in resolving the binding host name for
the listen socket. Because of its default functionality, the host resolver
resolves the binding host name for the listen socket through the local system.</li>
<li>&#x2026;under the UDP ASSOCIATE command when resolving the host name for an
outbound datagram packet. The host resolver is used in resolving the host name
for an outbound datagram packet. Because of its default functionality, the host
resolver resolves the host name for an outbound datagram packet through the
local system.</li>
<li>&#x2026;under the RESOLVE command when resolving the provided host name. The host
resolver is used in resolving the provided host name. Because of its default
functionality, the host resolver resolves the provided host name through the
local system.</li>
</ul>
<p>If you prefer to have host name resolution from the other SOCKS5 server without
the aforementioned limitations, you would need to set the setting
<code>chaining.socks5.useResolveCommand</code> to <code>true</code>. This setting enables the
host resolver to use the SOCKS5 RESOLVE command on the other SOCKS5 server to
resolve host names. This setting can only be used if the other SOCKS5 server
supports the SOCKS5 RESOLVE command.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.useResolveCommand=true
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.useResolveCommand&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section></section><section>
<h2>Chaining to a Specified Chain of Other SOCKS Servers</h2>
<p>You can have the server chained to a specified chain of other SOCKS servers,
meaning that its traffic can be routed through the specified chain of the other
SOCKS servers. To have the server chained to a specified chain of other SOCKS
servers, you will need to have the setting <code>chaining.socksServerUri</code>
specified multiple times with each setting specifying a SOCKS server as a URI.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:65432 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:34567
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:65432&lt;/value&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:34567&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>To specify the settings regarding a SOCKS server in the chain, the settings
regarding a SOCKS server will need to be placed after that specified SOCKS
server but before the next specified SOCKS server if any.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:23456 \
    --setting=chaining.socks5.methods=GSSAPI \
    --setting=chaining.socks5.gssapiauth.serviceName=rcmd/127.0.0.1 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:65432 \
    --setting=chaining.socks5.methods=USERNAME_PASSWORD \
    --setting=chaining.socks5.userpassauth.username=Aladdin \
    --setting=chaining.socks5.userpassauth.password=opensesame \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:34567 \
    --setting=chaining.socks5.useResolveCommand=true
    
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:23456&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;GSSAPI&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.gssapiauth.serviceName&lt;/name&gt;
            &lt;value&gt;rcmd/127.0.0.1&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:65432&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.methods&lt;/name&gt;
            &lt;socks5.methods&gt;
                &lt;socks5.method&gt;USERNAME_PASSWORD&lt;/socks5.method&gt;
            &lt;/socks5.methods&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.username&lt;/name&gt;
            &lt;value&gt;Aladdin&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.userpassauth.password&lt;/name&gt;
            &lt;value&gt;opensesame&lt;/value&gt;
            &lt;doc&gt;If this configuration file was created by new-server-config-file, the password would be encrypted&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:34567&lt;/value&gt;
        &lt;/setting&gt;        
        &lt;setting&gt;
            &lt;name&gt;chaining.socks5.useResolveCommand&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>The known limitations of chaining to a specified chain of other SOCKS servers
include the following:</p>
<ul>

<li>Only TCP traffic can be routed through the chain. The server will attempt to
route any UDP traffic through the last SOCKS server of the chain.</li>
</ul></section><section>
<h2>Chaining to Multiple Specified Chains of Other SOCKS Servers</h2>
<p>You can have the server chained to multiple specified chains of other SOCKS
servers, meaning that its traffic can be routed through one of the specified
chains of other SOCKS servers. To have the server chained to multiple specified
chains of other SOCKS servers, you will need to have a route ID assigned at the
end of each <a href="#chaining-to-a-specified-chain-of-other-socks-servers">chain</a> by
using the setting <code>chaining.routeId</code></p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=chaining.routeId=delta
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;delta&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>From the aforementioned examples:</p>
<ul>

<li>The chain consisting of <code>socks5://127.0.0.1:11111</code>,
<code>socks5://127.0.0.1:11112</code>, and <code>socks5://127.0.0.1:11113</code> is assigned
the route ID of <code>alpha</code></li>
<li>The chain consisting of <code>socks5://127.0.0.1:22221</code>,
<code>socks5://127.0.0.1:22222</code>, and <code>socks5://127.0.0.1:22223</code> is assigned
the route ID of <code>beta</code></li>
<li>The chain consisting of <code>socks5://127.0.0.1:33331</code>,
<code>socks5://127.0.0.1:33332</code>, and <code>socks5://127.0.0.1:33333</code> is assigned
the route ID of <code>delta</code></li>
</ul>
<p>There is another route that is assigned a route ID. That route is the direct
route. The direct route uses no chain to route the traffic through. It is
assigned by default a route ID of <code>lastRoute</code>.</p>
<p>To omit the direct route from being included, have the last chain not assigned a
route ID from the setting <code>chaining.routeId</code>.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>From the aforementioned examples:</p>
<ul>

<li>The chain consisting of <code>socks5://127.0.0.1:11111</code>,
<code>socks5://127.0.0.1:11112</code>, and <code>socks5://127.0.0.1:11113</code> is assigned
the route ID of <code>alpha</code></li>
<li>The chain consisting of <code>socks5://127.0.0.1:22221</code>,
<code>socks5://127.0.0.1:22222</code>, and <code>socks5://127.0.0.1:22223</code> is assigned
the route ID of <code>beta</code></li>
<li>The chain consisting of <code>socks5://127.0.0.1:33331</code>,
<code>socks5://127.0.0.1:33332</code>, and <code>socks5://127.0.0.1:33333</code> is assigned
by default the route ID of <code>lastRoute</code></li>
</ul>
<p>To change the route ID assigned to the last route, you can set the setting
<code>lastRouteId</code> to the route ID you want assigned to the last route.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>You can also set the setting <code>routeSelectionStrategy</code> to specify the
selection strategy for the next route. The default is <code>CYCLICAL</code>.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega \
    --setting=routeSelectionStrategy=RANDOM
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
            &lt;value&gt;RANDOM&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>You can also set the setting <code>routeSelectionLogAction</code> to specify the
logging action to take if a route is selected.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega \
    --setting=routeSelectionStrategy=RANDOM \
    --setting=routeSelectionLogAction=LOG_AS_INFO
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
            &lt;value&gt;RANDOM&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;routeSelectionLogAction&lt;/name&gt;
            &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h2>Using Rules to Manage Traffic</h2>
<p>A rule consists of the following:</p>
<ul>

<li>Rule conditions: fields that altogether evaluate as true if they match a
specific instance of traffic</li>
<li>Rule results: fields that are applied if the aforementioned rule conditions
evaluate as true for matching a specific instance of traffic</li>
</ul>
<p>On the command line, a rule consists of a comma separated list of both rule
conditions and rule results.</p>
<p>In the server configuration file, a rule is expressed as a <code>&lt;rule/&gt;</code> XML
element with a <code>&lt;ruleConditions/&gt;</code> XML element and a <code>&lt;ruleResults/&gt;</code> XML
element.</p>
<p>See <a href="#rule-conditions">Rule Conditions</a> and <a href="#rule-results">Rule Results</a> for
more information.</p>
<p>To specify a rule, you would need to have the setting <code>rule</code> specify the rule.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allows all forms of traffic&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>To specify multiple rules, you would need to have the setting <code>rule</code> specified
multiple times with each setting specifying another rule.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=rule=socks5.command=CONNECT,socks5.desiredDestinationPort=80,socks5.desiredDestinationPort=443,firewallAction=ALLOW \
    --setting=rule=socks5.command=CONNECT,firewallAction=DENY \
    --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationPort&lt;/name&gt;
                        &lt;value&gt;80&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationPort&lt;/name&gt;
                        &lt;value&gt;443&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allows the CONNECT command to any server on port 80 or 443&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;DENY&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Denies the CONNECT command to any server on any other port&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>When a specific instance of traffic is matched by the first rule, that rule is
applied and the rest of the rules are ignored. Therefore it is best to have more
specific rules specified first and have less specific rules specified last.</p><section>
<h3>Rule Conditions</h3>
<p>On the command line, rule conditions consist of a comma separated list of rule
conditions. Each rule condition consists of the syntax of <code>NAME=VALUE</code> where
<code>NAME</code> is expressed as the name of the rule condition and <code>VALUE</code> is expressed
as the value assigned to the rule condition.</p>
<p>Partial command line example:</p>

<div class="verbatim">
<pre><code>clientAddress=127.0.0.1,clientAddress=0:0:0:0:0:0:0:1
</code></pre></div>
<p>In the server configuration file, rule conditions are expressed in a
<code>&lt;ruleConditions/&gt;</code> XML element with zero to many <code>&lt;ruleCondition/&gt;</code> XML
elements. Each <code>&lt;ruleCondition/&gt;</code> XML element contains a <code>&lt;name/&gt;</code> XML
element for the name of the rule condition and the <code>&lt;value/&gt;</code> XML element of
the value assigned to the rule condition.</p>
<p>Partial server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;ruleConditions&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;127.0.0.1&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;0:0:0:0:0:0:0:1&lt;/value&gt;
    &lt;/ruleCondition&gt;
&lt;/ruleConditions&gt;
</code></pre></div>
<p>Rule conditions within a rule are evaluated as true if each group of one or more
rule conditions with the same name is evaluated as true. A group of one or more
rule conditions with the same name is evaluated as true if at least one of the
rule conditions within that group is evaluated as true. Zero rule conditions
within a rule are evaluated as true.</p>
<p>Partial server configuration file examples:</p>

<div class="verbatim">
<pre><code>&lt;ruleConditions&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;127.0.0.1&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;clientAddress&lt;/name&gt;
        &lt;value&gt;0:0:0:0:0:0:0:1&lt;/value&gt;
    &lt;/ruleCondition&gt;
&lt;/ruleConditions&gt;
&lt;!-- evaluates as true if the client address is the IPv4 loopback address or the IPv6 loopback address --&gt;
</code></pre></div>

<div class="verbatim">
<pre><code>&lt;ruleConditions&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;socks5.method&lt;/name&gt;
        &lt;value&gt;USERNAME_PASSWORD&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;socks5.user&lt;/name&gt;
        &lt;value&gt;guest&lt;/value&gt;
    &lt;/ruleCondition&gt;
    &lt;ruleCondition&gt;
        &lt;name&gt;socks5.user&lt;/name&gt;
        &lt;value&gt;specialuser&lt;/value&gt;
    &lt;/ruleCondition&gt;
&lt;/ruleConditions&gt;
&lt;!-- evaluates as true if username password authentication was used and the user is either 'guest' or 'specialuser' --&gt;
</code></pre></div>

<div class="verbatim">
<pre><code>&lt;ruleConditions/&gt;
&lt;!-- evaluates as true since there are no rule conditions given --&gt;
</code></pre></div>
<p>A complete listing of rule conditions can be found in the
<a href="cli.html#settings-help">settings help</a> under <code>SETTING VALUE SYNTAXES</code> &gt;
<code>GENERAL_RULE_CONDITIONS</code> and <code>SETTING VALUE SYNTAXES</code> &gt;
<code>SOCKS5_RULE_CONDITIONS</code>.</p></section><section>
<h3>Rule Results</h3>
<p>On the command line, rule results consist of a comma separated list of rule
results. Each rule result consists of the syntax of <code>NAME=VALUE</code> where <code>NAME</code>
is expressed as the name of the rule result and <code>VALUE</code> is expressed as the
value assigned to the rule result.</p>
<p>Partial command line example:</p>

<div class="verbatim">
<pre><code>firewallAction=ALLOW,firewallActionLogAction=LOG_AS_INFO
</code></pre></div>
<p>In the server configuration file, rule result are expressed in a <code>&lt;ruleResults/&gt;</code>
XML element with zero to many <code>&lt;ruleResult/&gt;</code> XML elements. Each
<code>&lt;ruleResult/&gt;</code> XML element contains a <code>&lt;name/&gt;</code> XML element for the name of
the rule result and the <code>&lt;value/&gt;</code> XML element of the value assigned to the
rule result.</p>
<p>Partial server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;ruleResults&gt;
    &lt;ruleResult&gt;
        &lt;name&gt;firewallAction&lt;/name&gt;
        &lt;value&gt;ALLOW&lt;/value&gt;
    &lt;/ruleResult&gt;
    &lt;ruleResult&gt;
        &lt;name&gt;firewallActionLogAction&lt;/name&gt;
        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
    &lt;/ruleResult&gt;
&lt;/ruleResults&gt;
</code></pre></div>
<p>Unless otherwise stated, if a rule result of the same name appears more than
once in the comma separated list or in the <code>&lt;ruleResults/&gt;</code> XML element, then
only the last rule result of the same name is recognized.</p>
<p>A complete listing of rule results can be found in the
<a href="cli.html#settings-help">settings help</a> under <code>SETTING VALUE SYNTAXES</code> &gt;
<code>GENERAL_RULE_RESULTS</code> and <code>SETTING VALUE SYNTAXES</code> &gt;
<code>SOCKS5_RULE_RESULTS</code>.</p></section><section>
<h3>Allowing or Denying Traffic</h3>
<p>To allow or deny a specific instance of traffic, you will need the following
rule result:</p>
<ul>

<li><code>firewallAction</code></li>
</ul>
<p>The value given to the rule result must be either of the following values:</p>
<ul>

<li><code>ALLOW</code></li>
<li><code>DENY</code></li>
</ul>
<p>This rule result can be used with the following rule conditions:</p>
<ul>

<li><code>clientAddress</code></li>
<li><code>socks5.command</code></li>
<li><code>socks5.desiredDestinationAddress</code></li>
<li><code>socks5.desiredDestinationPort</code></li>
<li><code>socks5.method</code></li>
<li><code>socks5.secondServerBoundAddress</code></li>
<li><code>socks5.secondServerBoundPort</code></li>
<li><code>socks5.serverBoundAddress</code></li>
<li><code>socks5.serverBoundPort</code></li>
<li><code>socks5.udp.inbound.desiredDestinationAddress</code></li>
<li><code>socks5.udp.inbound.desiredDestinationPort</code></li>
<li><code>socks5.udp.inbound.sourceAddress</code></li>
<li><code>socks5.udp.inbound.sourcePort</code></li>
<li><code>socks5.udp.outbound.desiredDestinationAddress</code></li>
<li><code>socks5.udp.outbound.desiredDestinationPort</code></li>
<li><code>socks5.udp.outbound.sourceAddress</code></li>
<li><code>socks5.udp.outbound.sourcePort</code></li>
<li><code>socks5.user</code></li>
<li><code>socksServerAddress</code></li>
</ul>
<p><strong>Note</strong>: for any other rule results to be applied, the rule result
<code>firewallAction</code> with the value of <code>ALLOW</code> must be present.</p>
<p>You can also specify the logging action to take if the rule result
<code>firewallAction</code> is applied by adding the following rule result:</p>
<ul>

<li><code>firewallActionLogAction</code></li>
</ul>
<p>The rule result <code>firewallActionLogAction</code> is optional.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=rule=socks5.command=BIND,socks5.command=UDP_ASSOCIATE,firewallAction=DENY,firewallActionLogAction=LOG_AS_WARNING \
    --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;BIND&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;UDP_ASSOCIATE&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;DENY&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallActionLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_WARNING&lt;/value&gt;
                    &lt;/ruleResult&gt;                
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Deny any BIND or UDP ASSOCIATE commands and log as a warning message if they are denied&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Allowing a Limited Number of Simultaneous Instances of Traffic</h3>
<p>To allow a limited number of simultaneous specific instances of traffic, you
will need the following rule result:</p>
<ul>

<li><code>firewallActionAllowLimit</code></li>
</ul>
<p>The value given to the rule result must be an integer between 0 (inclusive) and
2147483647 (inclusive)</p>
<p>This rule result can be used with the following rule conditions:</p>
<ul>

<li><code>clientAddress</code></li>
<li><code>socks5.command</code></li>
<li><code>socks5.desiredDestinationAddress</code></li>
<li><code>socks5.desiredDestinationPort</code></li>
<li><code>socks5.method</code></li>
<li><code>socks5.secondServerBoundAddress</code></li>
<li><code>socks5.secondServerBoundPort</code></li>
<li><code>socks5.serverBoundAddress</code></li>
<li><code>socks5.serverBoundPort</code></li>
<li><code>socks5.user</code></li>
<li><code>socksServerAddress</code></li>
</ul>
<p>You can also specify the logging action to take if the limit on the number of
simultaneous specific instances of traffic has been reached by adding the
following rule result:</p>
<ul>

<li><code>firewallActionAllowLimitReachedLogAction</code></li>
</ul>
<p>The rule result <code>firewallActionAllowLimitReachedLogAction</code> is optional.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=rule=socks5.method=USERNAME_PASSWORD,socks5.user=guest,firewallAction=ALLOW,firewallActionAllowLimit=50,firewallActionAllowLimitReachedLogAction=LOG_AS_INFO \
    --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.method&lt;/name&gt;
                        &lt;value&gt;USERNAME_PASSWORD&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.user&lt;/name&gt;
                        &lt;value&gt;guest&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallActionAllowLimit&lt;/name&gt;
                        &lt;value&gt;50&lt;/value&gt;
                    &lt;/ruleResult&gt;                
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallActionAllowLimitReachedLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the user 'guest' from username password authentication 50 simultaneous connections and log as an informational message that the limit has been reached&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Routing Traffic</h3>
<p>To route traffic, you can use the following rule results:</p>
<ul>

<li><code>routeSelectionStrategy</code>: Specifies the selection strategy for the next
route (This rule result is optional. If this rule result is not specified, the
setting <code>routeSelectionStrategy</code> is used.)</li>
<li><code>selectableRouteId</code>: Specifies the ID for a selectable
<a href="#chaining-to-multiple-specified-chains-of-other-socks-servers">route</a> (This
rule result is optional. This rule result can be specified multiple times with
each rule result specifying another ID for a selectable route. If this rule
result is not specified, all of the routes defined by the settings
<code>chaining.routeId</code> and <code>lastRouteId</code> are selectable.)</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><code>clientAddress</code></li>
<li><code>socks5.command</code></li>
<li><code>socks5.desiredDestinationAddress</code></li>
<li><code>socks5.desiredDestinationPort</code></li>
<li><code>socks5.method</code></li>
<li><code>socks5.user</code></li>
<li><code>socksServerAddress</code></li>
</ul>
<p>You can also specify the logging action to take if a route is selected by adding
the following rule result:</p>
<ul>

<li><code>routeSelectionLogAction</code></li>
</ul>
<p>The rule result <code>routeSelectionLogAction</code> is optional. If the rule result is
not specified, the setting <code>routeSelectionLogAction</code> is used.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11111 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11112 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:11113 \
    --setting=chaining.routeId=alpha \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22221 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22222 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:22223 \
    --setting=chaining.routeId=beta \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33331 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33332 \
    --setting=chaining.socksServerUri=socks5://127.0.0.1:33333 \
    --setting=lastRouteId=omega \
    --setting=rule=socks5.command=CONNECT,firewallAction=ALLOW,routeSelectionStrategy=RANDOM,selectableRouteId=alpha,selectableRouteId=beta,routeSelectionLogAction=LOG_AS_INFO \
    --setting=rule=firewallAction=ALLOW,routeSelectionStrategy=CYCLICAL,selectableRouteId=omega
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11111&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11112&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:11113&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;alpha&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22221&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22222&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:22223&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.routeId&lt;/name&gt;
            &lt;value&gt;beta&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33331&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33332&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;chaining.socksServerUri&lt;/name&gt;
            &lt;value&gt;socks5://127.0.0.1:33333&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;lastRouteId&lt;/name&gt;
            &lt;value&gt;omega&lt;/value&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
                        &lt;value&gt;RANDOM&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;selectableRouteId&lt;/name&gt;
                        &lt;value&gt;alpha&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;selectableRouteId&lt;/name&gt;
                        &lt;value&gt;beta&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;routeSelectionLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Randomly select either route 'alpha' or 'beta' when allowing the CONNECT command and log as an informational message the route that has been selected&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;routeSelectionStrategy&lt;/name&gt;
                        &lt;value&gt;CYCLICAL&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;selectableRouteId&lt;/name&gt;
                        &lt;value&gt;omega&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else to go through route 'omega'&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Redirecting the Desired Destination</h3>
<p>To redirect the desired destination, you will need either or both of the
following rule results:</p>
<ul>

<li><code>socks5.desiredDestinationAddressRedirect</code>: Specifies the desired
destination address redirect</li>
<li><code>socks5.desiredDestinationPortRedirect</code>: Specifies the desired
destination port redirect</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><code>clientAddress</code></li>
<li><code>socks5.command</code></li>
<li><code>socks5.desiredDestinationAddress</code></li>
<li><code>socks5.desiredDestinationPort</code></li>
<li><code>socks5.method</code></li>
<li><code>socks5.user</code></li>
<li><code>socksServerAddress</code></li>
</ul>
<p>You can also specify the logging action to take if the desired destination is
redirected by adding the following rule result:</p>
<ul>

<li><code>socks5.desiredDestinationRedirectLogAction</code></li>
</ul>
<p>The rule result <code>socks5.desiredDestinationRedirectLogAction</code> is optional.</p>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=rule=socks5.desiredDestinationAddress=discontinuedserver.com,firewallAction=ALLOW,socks5.desiredDestinationAddressRedirect=newserver.com,socks5.desiredDestinationRedirectLogAction=LOG_AS_INFO \
    --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;discontinuedserver.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.desiredDestinationAddressRedirect&lt;/name&gt;
                        &lt;value&gt;newserver.com&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.desiredDestinationRedirectLogAction&lt;/name&gt;
                        &lt;value&gt;LOG_AS_INFO&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Redirect desired destination 'discontinuedserver.com' to 'newserver.com' and log as an informational message the redirection&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Configuring Sockets</h3>
<p>To configure the sockets, you will need any of the following rule results:</p>
<ul>

<li><code>bindHost</code>: Specifies the binding host name or address for all sockets</li>
<li><code>bindTcpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all TCP sockets (This rule result
can be specified multiple times with each rule result specifying another port
range)</li>
<li><code>bindUdpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all UDP sockets (This rule result
can be specified multiple times with each rule result specifying another port
range)</li>
<li><code>clientSocketSetting</code>: Specifies a socket setting for the client socket
(This rule result can be specified multiple times with each rule result
specifying another socket setting)</li>
<li><code>externalFacingBindHost</code>: Specifies the binding host name or address for
all external-facing sockets</li>
<li><code>externalFacingBindTcpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all external-facing TCP sockets
(This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>externalFacingBindUdpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all external-facing UDP sockets
(This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>externalFacingSocketSetting</code>: Specifies a socket setting for all
external-facing sockets (This rule result can be specified multiple times with
each rule result specifying another socket setting)</li>
<li><code>internalFacingBindHost</code>: Specifies the binding host name or address for
all internal-facing sockets</li>
<li><code>internalFacingBindTcpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all internal-facing TCP sockets
(This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>internalFacingBindUdpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all internal-facing UDP sockets
(This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>internalFacingSocketSetting</code>: Specifies a socket setting for all
internal-facing sockets (This rule result can be specified multiple times with
each rule result specifying another socket setting)</li>
<li><code>socketSetting</code>: Specifies a socket setting for all sockets (This rule
result can be specified multiple times with each rule result specifying another
socket setting)</li>
<li><code>socks5.onBind.inboundSocketSetting</code>: Specifies a socket setting for
the inbound socket (This rule result can be specified multiple times with each
rule result specifying another socket setting)</li>
<li><code>socks5.onBind.listenBindHost</code>: Specifies the binding host name or
address for the listen socket if the provided host address is all zeros</li>
<li><code>socks5.onBind.listenBindPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for the listen socket if the provided
port is zero (This rule result can be specified multiple times with each rule
result specifying another port range)</li>
<li><code>socks5.onBind.listenSocketSetting</code>: Specifies a socket setting for
the listen socket (This rule result can be specified multiple times with each
rule result specifying another socket setting)</li>
<li><code>socks5.onCommand.bindHost</code>: Specifies the binding host name or address
for all sockets</li>
<li><code>socks5.onCommand.bindTcpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all TCP sockets (This rule result
can be specified multiple times with each rule result specifying another port
range)</li>
<li><code>socks5.onCommand.bindUdpPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for all UDP sockets (This rule result
can be specified multiple times with each rule result specifying another port
range)</li>
<li><code>socks5.onCommand.externalFacingBindHost</code>: Specifies the binding host
name or address for all external-facing sockets</li>
<li><code>socks5.onCommand.externalFacingBindTcpPortRange</code>: Specifies a
binding <a href="reference.html#port-range">port range</a> for all external-facing TCP
sockets (This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>socks5.onCommand.externalFacingBindUdpPortRange</code>: Specifies a
binding <a href="reference.html#port-range">port range</a> for all external-facing UDP
sockets (This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>socks5.onCommand.externalFacingSocketSetting</code>: Specifies a socket
setting for all external-facing sockets (This rule result can be specified
multiple times with each rule result specifying another socket setting)</li>
<li><code>socks5.onCommand.internalFacingBindHost</code>: Specifies the binding
host name or address for all internal-facing sockets</li>
<li><code>socks5.onCommand.internalFacingBindTcpPortRange</code>: Specifies a
binding <a href="reference.html#port-range">port range</a> for all internal-facing TCP
sockets (This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>socks5.onCommand.internalFacingBindUdpPortRange</code>: Specifies a
binding <a href="reference.html#port-range">port range</a> for all internal-facing UDP
sockets (This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>socks5.onCommand.internalFacingSocketSetting</code>: Specifies a socket
setting for all internal-facing sockets (This rule result can be specified
multiple times with each rule result specifying another socket setting)</li>
<li><code>socks5.onCommand.socketSetting</code>: Specifies a socket setting for all
sockets (This rule result can be specified multiple times with each rule result
specifying another socket setting)</li>
<li><code>socks5.onConnect.prepareServerFacingSocket</code>: Specifies the boolean
value to indicate if the server-facing socket is to be prepared before
connecting (involves applying the specified socket settings, resolving the
target host name, and setting the specified timeout on waiting to connect)</li>
<li><code>socks5.onConnect.serverFacingBindHost</code>: Specifies the binding host
name or address for the server-facing socket</li>
<li><code>socks5.onConnect.serverFacingBindPortRange</code>: Specifies a binding
<a href="reference.html#port-range">port range</a> for the server-facing socket (This rule
result can be specified multiple times with each rule result specifying another
port range)</li>
<li><code>socks5.onConnect.serverFacingConnectTimeout</code>: Specifies the timeout
in milliseconds on waiting for the server-facing socket to connect (Value must
be an integer between 1 (inclusive) and 2147483647 (inclusive))</li>
<li><code>socks5.onConnect.serverFacingSocketSetting</code>: Specifies a socket
setting for the server-facing socket (This rule result can be specified multiple
times with each rule result specifying another socket setting)</li>
<li><code>socks5.onUdpAssociate.clientFacingBindHost</code>: Specifies the binding
host name or address for the client-facing UDP socket</li>
<li><code>socks5.onUdpAssociate.clientFacingBindPortRange</code>: Specifies a
binding <a href="reference.html#port-range">port range</a> for the client-facing UDP socket
(This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>socks5.onUdpAssociate.clientFacingSocketSetting</code>: Specifies a
socket setting for the client-facing UDP socket (This rule result can be
specified multiple times with each rule result specifying another socket
setting)</li>
<li><code>socks5.onUdpAssociate.peerFacingBindHost</code>: Specifies the binding
host name or address for the peer-facing UDP socket</li>
<li><code>socks5.onUdpAssociate.peerFacingBindPortRange</code>: Specifies a
binding <a href="reference.html#port-range">port range</a> for the peer-facing UDP socket
(This rule result can be specified multiple times with each rule result
specifying another port range)</li>
<li><code>socks5.onUdpAssociate.peerFacingSocketSetting</code>: Specifies a socket
setting for the peer-facing UDP socket (This rule result can be specified
multiple times with each rule result specifying another socket setting)</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><code>clientAddress</code></li>
<li><code>socks5.command</code></li>
<li><code>socks5.desiredDestinationAddress</code></li>
<li><code>socks5.desiredDestinationPort</code></li>
<li><code>socks5.method</code></li>
<li><code>socks5.user</code></li>
<li><code>socksServerAddress</code></li>
</ul>
<p>The rule result <code>socks5.onBind.inboundSocketSetting</code> can also be used with
the following rule conditions:</p>
<ul>

<li><code>socks5.serverBoundAddress</code></li>
<li><code>socks5.serverBoundPort</code></li>
</ul>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=rule=socks5.command=CONNECT,socks5.desiredDestinationAddress=specialserver.com,firewallAction=ALLOW,socks5.onConnect.prepareServerFacingSocket=true,socks5.onConnect.serverFacingSocketSetting=SO_RCVBUF=256,socks5.onConnect.serverFacingSocketSetting=SO_SNDBUF=256 \
    --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;            
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;specialserver.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.prepareServerFacingSocket&lt;/name&gt;
                        &lt;value&gt;true&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.serverFacingSocketSetting&lt;/name&gt;
                        &lt;socketSetting&gt;
                            &lt;name&gt;SO_RCVBUF&lt;/name&gt;
                            &lt;value&gt;256&lt;/value&gt;
                        &lt;/socketSetting&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.serverFacingSocketSetting&lt;/name&gt;
                        &lt;socketSetting&gt;
                            &lt;name&gt;SO_SNDBUF&lt;/name&gt;
                            &lt;value&gt;256&lt;/value&gt;
                        &lt;/socketSetting&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the CONNECT command to connect to 'specialserver.com' and configure the server-facing socket for the CONNECT command&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Configuring Relay Settings</h3>
<p>To configure the relay settings, you will need any of the following rule results:</p>
<ul>

<li><code>socks5.onBind.relayBufferSize</code>: Specifies the buffer size in bytes
for relaying the data (Value must be an integer between 1 (inclusive) and
2147483647 (inclusive))</li>
<li><code>socks5.onBind.relayIdleTimeout</code>: Specifies the timeout in
milliseconds on relaying no data (Value must be an integer between 1 (inclusive)
and 2147483647 (inclusive))</li>
<li><code>socks5.onCommand.relayBufferSize</code>: Specifies the buffer size in bytes
for relaying the data (Value must be an integer between 1 (inclusive) and
2147483647 (inclusive))</li>
<li><code>socks5.onCommand.relayIdleTimeout</code>: Specifies the timeout in
milliseconds on relaying no data (Value must be an integer between 1 (inclusive)
and 2147483647 (inclusive))</li>
<li><code>socks5.onConnect.relayBufferSize</code>: Specifies the buffer size in bytes
for relaying the data (Value must be an integer between 1 (inclusive) and
2147483647 (inclusive))</li>
<li><code>socks5.onConnect.relayIdleTimeout</code>: Specifies the timeout in
milliseconds on relaying no data (Value must be an integer between 1 (inclusive)
and 2147483647 (inclusive))</li>
<li><code>socks5.onUdpAssociate.relayBufferSize</code>: Specifies the buffer size in
bytes for relaying the data (Value must be an integer between 1 (inclusive) and
2147483647 (inclusive))</li>
<li><code>socks5.onUdpAssociate.relayIdleTimeout</code>: Specifies the timeout in
milliseconds on relaying no data (Value must be an integer between 1 (inclusive)
and 2147483647 (inclusive))</li>
</ul>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><code>clientAddress</code></li>
<li><code>socks5.command</code></li>
<li><code>socks5.desiredDestinationAddress</code></li>
<li><code>socks5.desiredDestinationPort</code></li>
<li><code>socks5.method</code></li>
<li><code>socks5.secondServerBoundAddress</code></li>
<li><code>socks5.secondServerBoundPort</code></li>
<li><code>socks5.serverBoundAddress</code></li>
<li><code>socks5.serverBoundPort</code></li>
<li><code>socks5.user</code></li>
<li><code>socksServerAddress</code></li>
</ul>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=rule=socks5.command=CONNECT,socks5.desiredDestinationAddress=intermittent-idling-server.com,firewallAction=ALLOW,socks5.onConnect.relayIdleTimeout=1024000 \
    --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;            
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;intermittent-idling-server.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;socks5.onConnect.relayIdleTimeout&lt;/name&gt;
                        &lt;value&gt;1024000&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the CONNECT command to connect to 'intermittent-idling-server.com' with a relay idle timeout of 1024000 milliseconds (1024 seconds)&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section><section>
<h3>Limiting Relay Bandwidth</h3>
<p>To limit the relay bandwidth, you will need any of the following rule results:</p>
<ul>

<li><code>socks5.onBind.relayInboundBandwidthLimit</code>: Specifies the upper
limit on bandwidth in bytes per second of receiving inbound data to be relayed</li>
<li><code>socks5.onBind.relayOutboundBandwidthLimit</code>: Specifies the upper
limit on bandwidth in bytes per second of receiving outbound data to be relayed</li>
<li><code>socks5.onCommand.relayInboundBandwidthLimit</code>: Specifies the upper
limit on bandwidth in bytes per second of receiving inbound data to be relayed</li>
<li><code>socks5.onCommand.relayOutboundBandwidthLimit</code>: Specifies the upper
limit on bandwidth in bytes per second of receiving outbound data to be relayed</li>
<li><code>socks5.onConnect.relayInboundBandwidthLimit</code>: Specifies the upper
limit on bandwidth in bytes per second of receiving inbound data to be relayed</li>
<li><code>socks5.onConnect.relayOutboundBandwidthLimit</code>: Specifies the upper
limit on bandwidth in bytes per second of receiving outbound data to be relayed</li>
<li><code>socks5.onUdpAssociate.relayInboundBandwidthLimit</code>: Specifies the
upper limit on bandwidth in bytes per second of receiving inbound data to be
relayed</li>
<li><code>socks5.onUdpAssociate.relayOutboundBandwidthLimit</code>: Specifies the
upper limit on bandwidth in bytes per second of receiving outbound data to be
relayed</li>
</ul>
<p>The value given to any of the rule results must be an integer between 1
(inclusive) and 2147483647 (inclusive)</p>
<p>These rule results can be used with the following rule conditions:</p>
<ul>

<li><code>clientAddress</code></li>
<li><code>socks5.command</code></li>
<li><code>socks5.desiredDestinationAddress</code></li>
<li><code>socks5.desiredDestinationPort</code></li>
<li><code>socks5.method</code></li>
<li><code>socks5.secondServerBoundAddress</code></li>
<li><code>socks5.secondServerBoundPort</code></li>
<li><code>socks5.serverBoundAddress</code></li>
<li><code>socks5.serverBoundPort</code></li>
<li><code>socks5.user</code></li>
<li><code>socksServerAddress</code></li>
</ul>
<p>Command line example:</p>

<div class="verbatim">
<pre><code>./bin/jargyle start-server \
    --setting=rule=socks5.command=CONNECT,socks5.desiredDestinationAddress=streamingwebsite.com,firewallAction=ALLOW,socks5.onConnect.relayInboundBandwidthLimit=1024000,socks5.onConnect.relayOutboundBandwidthLimit=1024000 \
    --setting=rule=firewallAction=ALLOW
</code></pre></div>
<p>Server configuration file example:</p>

<div class="verbatim">
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions&gt;
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.command&lt;/name&gt;
                        &lt;value&gt;CONNECT&lt;/value&gt;
                    &lt;/ruleCondition&gt;            
                    &lt;ruleCondition&gt;
                        &lt;name&gt;socks5.desiredDestinationAddress&lt;/name&gt;
                        &lt;value&gt;streamingwebsite.com&lt;/value&gt;
                    &lt;/ruleCondition&gt;
                &lt;/ruleConditions&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                         &lt;name&gt;socks5.onConnect.relayInboundBandwidthLimit&lt;/name&gt;
                        &lt;value&gt;1024000&lt;/value&gt;
                    &lt;/ruleResult&gt;
                    &lt;ruleResult&gt;
                         &lt;name&gt;socks5.onConnect.relayOutboundBandwidthLimit&lt;/name&gt;
                        &lt;value&gt;1024000&lt;/value&gt;
                    &lt;/ruleResult&gt;                
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow the CONNECT command to connect to 'streamingwebsite.com' with an upper limit on the relay inbound and outbound bandwidth of 1024000 bytes per second&lt;/doc&gt;
        &lt;/setting&gt;
        &lt;setting&gt;
            &lt;name&gt;rule&lt;/name&gt;
            &lt;rule&gt;
                &lt;ruleConditions/&gt;
                &lt;ruleResults&gt;
                    &lt;ruleResult&gt;
                        &lt;name&gt;firewallAction&lt;/name&gt;
                        &lt;value&gt;ALLOW&lt;/value&gt;
                    &lt;/ruleResult&gt;
                &lt;/ruleResults&gt;
            &lt;/rule&gt;
            &lt;doc&gt;Allow anything else&lt;/doc&gt;
        &lt;/setting&gt;    
    &lt;/settings&gt;
&lt;/configuration&gt;
</code></pre></div></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Â©      2023
<a href="https://github.com/jh3nd3rs0n">jh3nd3rs0n</a>
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>
